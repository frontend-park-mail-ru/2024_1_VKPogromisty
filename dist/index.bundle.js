/*! For license information please see index.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={252:(t,e,n)=>{n.d(e,{A:()=>u});var r=n(601),o=n.n(r),i=n(314),a=n.n(i),s=n(557),c=a()(o());c.i(s.A),c.push([t.id,':root {\n  --main-bg-color: rgba(235, 158, 158, 0.23);\n  --input-color: #fceeeb;\n  --button-sign-in-bg-color: #000000;\n  --button-sign-in-color: #ffffff;\n  --link-sign-up-color: #000000;\n  --text-input-color: #858080;\n  --hovered-text-input: #585353;\n  --page-font-family: "Inter", sans-serif;\n  --sign-buttons: #de8181;\n  --background-input-color: #fceeeb;\n  --tramsform-duration: 0.3s;\n  --main-bg-color: rgb(248, 238, 238);\n  --cursive-text: "Jim Nightshade", cursive;\n  --ordinary-text: "Inter", sans-serif;\n  --borders-color: 1px solid #e35f7f;\n  --feed-header-color: #483d3d;\n  --button-feed: #5d5151;\n  --hovered-publish-button: #877777;\n  --hovered-left-sidebar: #443b3b;\n}\n* {\n  border: none;\n}\n\nbody {\n  background-color: var(--main-bg-color);\n  font-family: var(--page-font-family);\n  position: relative;\n}\n\n.form-wrapper {\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  min-width: fit-content;\n}\n.form {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.login-signup-text {\n  color: #000000;\n}\n.login-signup-text__first-part {\n  font-size: 40px;\n  margin-bottom: 10px;\n}\n.login-signup-text__second-part {\n  font-size: 44px;\n  font-weight: 900;\n  margin-bottom: 100px;\n}\n\n.login-form {\n  display: flex;\n  flex-direction: column;\n}\n.inscription-form {\n  font-size: 14px;\n  color: #000;\n  font-weight: 600;\n  text-align: left;\n  margin-bottom: 5px;\n}\n\n.input-group {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 24px;\n  justify-content: center;\n  color: var(--text-input-color);\n  font-size: 16px;\n}\n\n.input-group__input {\n  padding: 10px 0px 10px 10px;\n  border: 1px solid rgb(0, 0, 0, 0.3);\n  font-size: 18px;\n  background-color: var(--input-color);\n  border-radius: 12px;\n  height: 22px;\n}\n\n.image-container-login-signup {\n  text-align: center;\n}\n\n.image-container-login-signup__img {\n  width: 184px;\n  height: 154px;\n  display: inline-block;\n  margin-bottom: 40px;\n}\n\n.button-sign-in {\n  padding: 10px 20px;\n  width: 100%;\n  display: block;\n  margin: 0 auto;\n  background-color: var(--button-sign-in-bg-color);\n  color: var(--button-sign-in-color);\n  border: 1px solid var(--button-sign-in-border-color);\n  border-radius: 12px;\n  font-size: 20px;\n  cursor: pointer;\n  margin-top: 20px;\n  margin-bottom: 10px;\n}\n\n.link-sign-up {\n  color: var(--link-sign-up-color);\n  display: block;\n  text-align: center;\n  font-size: 16px;\n  margin-bottom: 20px;\n}\n\n.incorrect-data {\n  font-size: 30px;\n  color: var(--input-color);\n}\n\n.form__input__error {\n  color: red;\n  text-align: left;\n  font-size: 14px;\n}\n\n.error {\n  color: red;\n  text-align: left;\n  font-size: 14px;\n}\n\n.server-error-500 {\n  visibility: hidden;\n  text-align: center;\n}\n\n.register-form {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 400px;\n}\n\n.sign-up-upload-img {\n  width: 20px;\n  margin-left: 15px;\n}\n\n.vertical-stack {\n  display: flex;\n  flex-direction: column;\n}\n\n.form-label {\n  font-size: larger;\n  color: var(--text-input-color);\n}\n\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\n.date-birthday {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n}\n.date-birthday__input {\n  margin: 10px 5px;\n  width: 60px;\n  height: 22px;\n  text-align: center;\n  padding: 10px;\n  border: 1px solid rgb(0, 0, 0, 0.3);\n  border-radius: 12px;\n  font-size: 16px;\n  background-color: var(--input-color);\n}\n\n.input-avatar {\n  position: relative;\n  display: inline-block;\n  transition-duration: var(--tramsform-duration);\n  min-height: fit-content;\n  width: 100%;\n}\n\n.input-avatar span {\n  padding: 10px 20px;\n  display: block;\n  background-color: var(--background-input-color);\n  color: #000;\n  border: 1px solid #000;\n  border-radius: 12px;\n  font-size: 20px;\n  cursor: pointer;\n  margin-bottom: 10px;\n  max-width: 364px;\n}\n\n.input-avatar input[type="file"] {\n  position: absolute;\n  z-index: -1;\n  opacity: 0;\n  display: block;\n  width: 0;\n  height: 0;\n}\n\n.upload-image {\n  transition-duration: 0.5s;\n}\n\n.upload-image:hover {\n  filter: brightness(105%);\n}\n\n.sign-up-form {\n  display: flex;\n  flex-direction: column;\n}\n\n.sidebar {\n  height: 440px;\n  margin-right: 5%;\n  margin-top: 2%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 270px;\n  min-width: 200px;\n  font-size: 24;\n}\n\n.right-sidebar {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n  min-width: 200px;\n  font-style: var(--page-font-family);\n  box-sizing: border-box;\n  padding: 0px 20px;\n  margin: 15px 0px;\n}\n\n.sidebar-list,\n.right-sidebar-list {\n  box-sizing: border-box;\n  padding-left: 0px;\n  line-height: 40px;\n  list-style: none;\n}\n\n.sidebar-list__li,\n.right-sidebar-list__li {\n  box-sizing: border-box;\n  list-style-type: none;\n  margin-left: 0px;\n  font-family: var(--ordinary-text);\n  font-size: 18px;\n  font-weight: 600;\n  ::before {\n    box-sizing: border-box;\n  }\n  ::after {\n    box-sizing: border-box;\n  }\n}\n\n.sidebar-list__a,\n.right-sidebar__a {\n  box-sizing: border-box;\n  color: var(--text-input-color);\n  text-decoration: none;\n  font-size: 15px;\n}\n\n.sidebar-list__a {\n  font-size: 17px;\n  color: #5d5151;\n}\n\n.right-sidebar__a:hover {\n  font-size: 16px;\n  color: var(--hovered-text-input);\n}\n\n.sidebar-list__a:hover {\n  font-size: 18px;\n  color: var(--hovered-left-sidebar);\n}\n\n.activity {\n  box-sizing: border-box;\n  width: 650px;\n  margin-top: 2%;\n}\n\n.create-post {\n  border: 1px solid #000000;\n  border-radius: 7px;\n  display: flex;\n  flex-direction: column;\n}\n\n.create-post-header {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  height: 60px;\n}\n\n.news-avatar {\n  box-sizing: border-box;\n  display: flex;\n  align-self: center;\n  border-radius: 50%;\n  margin-left: 15px;\n}\n\n.news {\n  box-sizing: border-box;\n  width: 480px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-content: center;\n  padding-right: 10px;\n}\n\n.publish-button {\n  box-sizing: border-box;\n  font-family: var(--ordinary-text);\n  color: white;\n  font-family: inherit;\n  font-size: inherit;\n  background-color: var(--button-feed);\n  border-radius: 0px 7px 0px 0px;\n  border-left: 1px solid black;\n  transition-duration: 0.1s;\n}\n\n.publish-button:hover {\n  background-color: var(--hovered-publish-button);\n}\n\n.news__input {\n  box-sizing: border-box;\n  margin-left: 20px;\n  width: 360px;\n  min-width: 120px;\n  font-family: inherit;\n  font-size: inherit;\n  color: inherit;\n  background-color: transparent;\n}\n\n.news-avatar__img {\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.news__file-button {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  background-color: inherit;\n  margin-right: 10px;\n}\n\n.news__img {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n}\n\n.news__file-input {\n  display: none;\n}\n\n.news-content {\n  border-top: 1px solid black;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.news-content__textarea {\n  min-height: 60px;\n  margin-top: 10px;\n  font-family: var(--ordinary-text);\n  width: 95%;\n  resize: none;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  background-color: inherit;\n}\n\n.news-img-content {\n  min-height: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  width: 100%;\n  padding-bottom: 10px;\n}\n\n.news-img-content__img {\n  width: 95%;\n  margin: 10px 0px;\n}\n\n.post-author__user-avatar-img {\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  box-sizing: border-box;\n  margin: 10px;\n  object-fit: cover;\n}\n\n.post {\n  box-sizing: border-box;\n  border-radius: 7px;\n  background-color: #f4e3e3;\n  border: 1px solid #000000;\n  margin: 30px 0px;\n}\n\n.post-header {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid #000000;\n  padding-right: 15px;\n}\n\n.post-author {\n  box-sizing: border-box;\n  height: 60px;\n  display: flex;\n  padding-right: 10px;\n  font-family: var(--ordinary-text);\n  font-size: 18px;\n  align-items: center;\n}\n\n.post-author-info {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 60%;\n}\n\n.post-author-time {\n  display: flex;\n}\n\n.post-author-time__created-at-span {\n  color: var(--button-feed);\n  font-size: small;\n}\n\n.post-author-time__last-time-span {\n  color: var(--button-feed);\n  font-size: small;\n}\n\n.post-author-time__dot-img {\n  width: 16px;\n  height: 16px;\n}\n\n.post-author__edit-img {\n  width: 20px;\n  height: 20px;\n  margin-right: 10px;\n  cursor: pointer;\n}\n\n.post-header .author-name {\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  font-size: 24px;\n}\n\n.post-menu {\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n  margin-top: 15px;\n  padding-top: 5px;\n  margin-right: 20px;\n  display: flex;\n  flex-direction: row;\n}\n\n.post-author__trash-basket-img {\n  width: 20px;\n  height: 20px;\n  margin-right: 10px;\n  cursor: pointer;\n}\n\n.post-content {\n  position: relative;\n  box-sizing: border-box;\n  text-align: center;\n  padding: 5px;\n  overflow: hidden;\n}\n\n.post-content::-webkit-scrollbar {\n  display: none;\n}\n\n.post-content__text-span {\n  box-sizing: border-box;\n  font-family: var(--ordinary-text);\n  background-color: inherit;\n  resize: none;\n  width: 100%;\n}\n\n.post-content__text-span::-webkit-scrollbar {\n  display: none;\n}\n\n.post-content__img {\n  box-sizing: border-box;\n  width: 97%;\n  margin: 5px 0px 15px 0px;\n  border-radius: 7px;\n  box-shadow: 0 0 5px 1px rgb(145, 143, 143);\n}\n\n.post-content p {\n  box-sizing: border-box;\n  white-space: normal;\n}\n\n.post-reaction {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  align-content: center;\n  border-bottom: 1px solid #000000;\n  height: 50px;\n  padding-right: 15px;\n}\n\n.post-content__show-more-button {\n  position: absolute;\n  left: 5px;\n  bottom: 5px;\n  background-color: rgba(185, 185, 185, 0.7);\n  border-radius: 7px;\n  padding: 4px 5px;\n  color: white;\n  text-decoration: underline;\n  box-shadow: inset 0 0 2px 2px rgb(185, 185, 185);\n}\n\n.post-content__show-more-button:hover {\n  background-color: rgba(108, 109, 109, 0.8);\n}\n\n.reactions {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-self: center;\n  width: 100px;\n  justify-content: space-between;\n  padding-left: 15px;\n}\n\n.reactions-like {\n  box-sizing: border-box;\n  padding: 0px;\n  width: 30px;\n  background-color: inherit;\n}\n\n.show-comments {\n  background-color: inherit;\n}\n\n.show-password {\n  position: absolute;\n  margin-left: 290px;\n  margin-top: 10px;\n  cursor: pointer;\n}\n\n.show-password__button {\n  width: 30px;\n}\n\n.signup-show-password {\n  position: absolute;\n  margin-left: 360px;\n  margin-top: 10px;\n  cursor: pointer;\n}\n\n.show-comments-label__span {\n  color: var(--text-input-color);\n  font-size: 18px;\n  cursor: pointer;\n  margin-top: 4px;\n  margin-left: 5px;\n}\n\n.comment-menu {\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n  margin-top: 5px;\n  background-color: rgba(234, 169, 169, 0.16);\n  text-align: center;\n  vertical-align: middle;\n  padding-top: 5px;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.post-comment {\n  box-sizing: border-box;\n  height: 50px;\n  font-family: var(--ordinary-text);\n}\n\n.comment {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n}\n\n.comment div {\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  margin: 10px 0px 15px 0px;\n}\n\n.comment-author {\n  box-sizing: border-box;\n  font-size: 10px;\n  cursor: pointer;\n}\n\n.post-give-comment {\n  box-sizing: border-box;\n  height: 60px;\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  align-content: center;\n  font-family: var(--ordinary-text);\n  font-size: 18px;\n}\n\n.post-comment-img {\n  box-sizing: border-box;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  filter: invert(30%);\n}\n\n.post-footer {\n  box-sizing: border-box;\n  display: flex;\n}\n\n.post-footer .author-name {\n  box-sizing: border-box;\n  margin-top: 15px;\n}\n\n.comment-buttons {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  align-content: center;\n  width: 60px;\n  margin-right: 20px;\n}\n\n.post-footer__input {\n  box-sizing: border-box;\n  min-width: 220px;\n  width: 500px;\n  background-color: inherit;\n}\n\n.img-post-comment {\n  box-sizing: border-box;\n  width: 24px;\n  height: 24px;\n}\n\n.reactions__heart-img,\n.show-comments__messenger-img {\n  box-sizing: border-box;\n  width: 25px;\n  height: 25px;\n  cursor: pointer;\n}\n\n.show-comments__messenger-img {\n  filter: invert(20%);\n}\n\n.comment-buttons__paper-clip-img {\n  box-sizing: border-box;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  filter: invert(30%);\n}\n.search__input {\n  box-sizing: border-box;\n  background-color: var(--background-input-color);\n  margin-left: 180px;\n  width: 250px;\n  border-radius: 10px;\n  border: 1px solid black;\n  height: 30px;\n  padding-left: 7px;\n  border-color: rgb(143, 135, 135);\n  font-weight: 400;\n  font-style: normal;\n  font-family: inherit;\n  font-size: inherit;\n  color: inherit;\n}\n\n.user {\n  box-sizing: border-box;\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  font-family: var(--ordinary-text);\n  font-size: 26px;\n}\n.user__username-span {\n  color: #fff;\n  font-size: large;\n  margin-right: 23px;\n  width: 150px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.user__avatar-img {\n  box-sizing: border-box;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  object-fit: cover;\n}\n\n.left-side__img {\n  box-sizing: border-box;\n  width: 50px;\n  margin-right: 50px;\n  max-width: 100%;\n  cursor: pointer;\n  filter: invert(100%);\n}\n.main-feed {\n  box-sizing: border-box;\n  display: flex;\n  margin: 20px 70px 0px 45px;\n  justify-content: space-between;\n  max-width: 1500px;\n}\n.logo-feed {\n  box-sizing: border-box;\n  margin-right: 20px;\n  margin-left: 22px;\n  position: absolute;\n  font-family: var(--cursive-text);\n  font-weight: 400;\n  font-size: 28px;\n}\n.left-side {\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n}\n.header {\n  box-sizing: border-box;\n  padding: 15px 25px 15px 115px;\n  width: 100%;\n  display: flex;\n  background-color: var(--feed-header-color);\n  align-items: center;\n  justify-content: space-between;\n}\n\n.user__notification-img {\n  width: 30px;\n  filter: brightness(2400%);\n  margin-right: 20px;\n}\n\n.user__logout-button {\n  padding: 4px 15px;\n  display: block;\n  margin: 0 auto;\n  background-color: var(--input-color);\n  color: #000;\n  border: 1px solid #000;\n  border-radius: 12px;\n  font-size: 20px;\n  cursor: pointer;\n  margin-left: 20px;\n}\n\n.feed-main {\n  display: flex;\n  flex-direction: row;\n  margin-right: 450px;\n  margin-left: 100px;\n}\n\n.form__input__correct {\n  visibility: hidden;\n}\n\n.profile-poster {\n  width: 100%;\n  height: 350px;\n  border: 1px solid black;\n  border-radius: 7px;\n  margin-bottom: 20px;\n  position: relative;\n}\n\n.profile-wrapper {\n  width: 100%;\n  height: 100%;\n  border-bottom: 1px solid black;\n  border-radius: inherit;\n}\n\n.profile-poster-view {\n  box-sizing: border-box;\n  position: absolute;\n  width: 100%;\n  height: 90px;\n  display: flex;\n  flex-direction: row;\n  z-index: 1;\n  background-color: #f4e3e3;\n  border-radius: 7px;\n  padding-left: 20px;\n  bottom: 0px;\n  justify-content: space-between;\n  padding-right: 30px;\n}\n\n.profile-wrapper__settings-img {\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  width: 30px;\n  cursor: pointer;\n}\n\n.profile-wrapper__settings-img:hover {\n  filter: invert(100%);\n}\n.profile-wrapper__back-img {\n  width: 100%;\n  height: 100%;\n  border-radius: inherit;\n}\n\n.profile-poster__avatar-img {\n  position: absolute;\n  border-radius: 50%;\n  width: 110px;\n  height: 110px;\n  border: 2px solid #f4e3e3;\n  margin-right: 20px;\n  top: -55px;\n  object-fit: cover;\n}\n\n.profile-brief {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 10px 0px 20px;\n  margin-left: 130px;\n}\n\n.profile-brief__name-span {\n  font-weight: bolder;\n  font-size: 21px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 200px;\n}\n\n.profile-brief-info {\n  color: var(--button-feed);\n  font-size: small;\n}\n\n.messenger {\n  width: 650px;\n}\n\n.message__edit-img,\n.message__trash-basket-img {\n  width: 14px;\n  height: 14px;\n  margin-right: 0px;\n  cursor: pointer;\n}\n\n.dialogs {\n  width: 650px;\n  border-radius: 7px;\n  background-color: #f4e3e3;\n  border: 1px solid black;\n}\n\n.search-dialog {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-left: 20px;\n}\n\n.search-dialog__input {\n  background-color: inherit;\n}\n\n.search-buttons {\n  position: relative;\n  width: 7%;\n  height: 90px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.dialog {\n  width: 100%;\n  height: 80px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 15px;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n\n.dialogs__a {\n  text-decoration: none;\n  color: black;\n  border: 7px;\n  width: 100%;\n}\n\n.dialog:first-child {\n  border-top-left-radius: 7px;\n  border-top-right-radius: 7px;\n}\n\n.dialog:last-child {\n  border-bottom-left-radius: 7px;\n  border-bottom-right-radius: 7px;\n}\n\n.dialog:not(:last-child) {\n  border-bottom: 1px solid #e35f7f;\n}\n\n.dialog:hover {\n  background-color: #f8dada;\n}\n\n.chatter {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100%;\n  height: 70%;\n  border-radius: 7px;\n}\n\n.chatter__avatar-img {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n}\n\n.chatter-info {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n  margin-left: 20px;\n}\n\n.chatter-content {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: space-between;\n}\n\n.chatter-info__name-span {\n  font-size: large;\n  font-weight: 600;\n  width: 400px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.chatter-content__message-span {\n  font-size: medium;\n  width: 400px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 1px;\n}\n\n.chatter-content__time-span {\n  font-size: 13px;\n  color: var(--button-feed);\n}\n\n.conversation {\n  width: 90%;\n  background-color: #f4e3e3;\n  border: 1px solid black;\n  border-radius: 7px;\n}\n\n.messages::-webkit-scrollbar {\n  display: none;\n}\n\n.print-message__text-input::-webkit-scrollbar {\n  display: none;\n}\n\n.messages {\n  width: 100%;\n  height: 430px;\n  border-top: 1px solid #de8181;\n  display: flex;\n  flex-direction: column-reverse;\n  padding: 10px;\n  box-sizing: border-box;\n  overflow: scroll;\n}\n\n.message {\n  max-width: 300px;\n  border-radius: 7px;\n  border: 1px solid grey;\n  background: linear-gradient(-45deg, #f8e4e0, #ffd2c8);\n  padding: 5px 5px;\n}\n\n.left-message {\n  margin-right: auto;\n}\n\n.right-message {\n  margin-left: 20px;\n}\n\n.message-content {\n  margin-bottom: 5px;\n}\n\n.message-time-edited {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding-right: 10px;\n}\n\n.message-time-edited__span-edited {\n  margin-left: 10px;\n}\n\n.message-time-edited__span-edited,\n.message-time-edited__span-time {\n  font-size: 13px;\n  color: var(--button-feed);\n}\n\n.messages__start-dialog-span {\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n}\n\n.companion {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  height: 70px;\n  padding: 0px 20px;\n}\n\n.go-back {\n  display: flex;\n  flex-direction: row;\n}\n.go-back__a {\n  cursor: auto;\n}\n\n.go-back__button {\n  background-color: inherit;\n  color: rgb(143, 143, 143);\n  font-size: medium;\n  font-weight: lighter;\n  margin-top: 15px;\n}\n\n.companion-header {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.companion-info {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  margin-left: 20px;\n  height: 55%;\n}\n\n.companion__name-span {\n  font-size: large;\n  font-family: var(--ordinary-text);\n  width: 300px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.companion__status-span {\n  font-size: small;\n  color: #928888;\n}\n\n.companion__avatar-img {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n}\n\n.search-buttons__menu-img {\n  width: 30px;\n  height: 30px;\n  top: 20px;\n  right: 5px;\n}\n\n.search-dialog__magnifier-img {\n  width: 16px;\n  height: 16px;\n}\n\n.search-place {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 7px;\n  border: 1px solid black;\n  height: 60px;\n  padding-left: 10px;\n  margin-bottom: 20px;\n}\n\n.search-friend {\n  display: flex;\n  flex-direction: row;\n  height: 30px;\n  align-items: center;\n  padding-left: 10px;\n  width: 500px;\n  min-width: 100px;\n  background-color: #fceeeb;\n}\n\n.search-friend__magnifier-img {\n  width: 16px;\n  height: 16px;\n  margin-right: 5px;\n}\n\n.search-friend__input {\n  background-color: inherit;\n}\n\n.friends {\n  width: 100%;\n  border-radius: 7px;\n  border: 1px solid black;\n}\n\n.friend__avatar-img {\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  margin-right: 15px;\n  object-fit: cover;\n}\n\n.friend {\n  display: flex;\n}\n\n.friends-field {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0px 20px;\n  height: 70px;\n}\n\n.friends-field:not(:last-child) {\n  border-bottom: 1px solid black;\n}\n\n.friend-info {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding-bottom: 10px;\n}\n\n.friend-info__name-span {\n  font-weight: bolder;\n}\n\n.friend-content__date-of-birth-span {\n  color: var(--button-feed);\n  font-size: 13px;\n}\n\n.friend-ables__add-friend-button,\n.friend-ables__unsubscribe-button,\n.friend-ables__delete-friend-button {\n  background-color: #e0908d;\n  color: white;\n  border-radius: 7px;\n  height: 30px;\n}\n\n.right-sidebar-friends {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n  min-width: 200px;\n  font-size: 24;\n  font-style: var(--page-font-family);\n  box-sizing: border-box;\n  margin: 15px 0px;\n  padding: 0px 70px;\n}\n\n.right-sidebar__a-common {\n  font-size: 15px;\n  text-decoration: none;\n  color: var(--text-input-color);\n}\n\n.right-sidebar__a-bigger {\n  font-size: 16px;\n  color: var(--hovered-text-input);\n  text-decoration: none;\n}\n\n.subscribed-to-options__button-subscribe {\n  background-color: #e0908d;\n  color: white;\n  border-radius: 7px;\n  height: 40px;\n}\n\n.subscribed-to-options__button-unsubscribe {\n  background-color: #877777;\n  color: white;\n  border-radius: 7px;\n  height: 40px;\n}\n\n.subscribed-to-options__img {\n  height: 30px;\n  width: 30px;\n  filter: invert(100%);\n}\n\n.subscribed-to-options__button-subscribe-message {\n  margin-left: 15px;\n  background-color: #e0908d;\n  height: 40px;\n  border-radius: 7px;\n}\n\n.subscribed-to-options__button-unsubscribe-message {\n  margin-left: 15px;\n  background-color: #877777;\n  height: 40px;\n  border-radius: 7px;\n}\n\n.subscribed-to-options {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.friend-ables {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.friend-ables__send-message-button {\n  margin-right: 10px;\n  background-color: #e0908d;\n  height: 30px;\n  border-radius: 7px;\n}\n\n.friend-ables__send-message-img {\n  height: 22px;\n  width: 22px;\n  filter: invert(100%);\n}\n\n.no-dialogs,\n.no-friends {\n  text-align: center;\n  margin-top: 40px;\n}\n\n.messages__start-dialog-span,\n.no-posts__span,\n.no-dialogs__span,\n.no-subscribers__span,\n.no-subscriptions__span,\n.no-friends__span {\n  color: #928888;\n  text-align: center;\n  font-size: 22px;\n}\n\n.message-menu__accept-img {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n}\n\n.post-author__name-span {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 400px;\n}\n\n.post-author__accept-img {\n  cursor: pointer;\n}\n\n.post-author__cancel-img {\n  cursor: pointer;\n  margin-left: 10px;\n}\n\n.area-update-posts {\n  height: 1000px;\n}\n\n.ables {\n  margin-left: auto;\n  filter: invert(50%);\n}\n\n.message-ables {\n  display: flex;\n  flex-direction: row;\n  margin-top: 15px;\n}\n\n.add-message {\n  border-top: 1px solid #de8181;\n  height: 70px;\n  background-color: #f8dada;\n  border-radius: 0px 0px 7px 7px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0px 10px;\n  width: 100%;\n  justify-content: space-between;\n  box-sizing: border-box;\n}\n\n.print-message {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 90%;\n  border: 1px solid #8e8787;\n  border-radius: 7px;\n  background-color: #fceeeb;\n  height: 40px;\n  padding: 1px 10px 1px 5px;\n}\n\n.print-message__text-input {\n  width: 100%;\n  margin-right: 10px;\n  background-color: inherit;\n  border-radius: 7px 0px 0px 7px;\n  font-family: var(--ordinary-text);\n  resize: none;\n  box-sizing: border-box;\n  max-height: 60px;\n}\n\n.message-menu__send-img {\n  width: 20px;\n  height: 20px;\n}\n\n.message-menu__send-button {\n  background-color: inherit;\n}\n\n.no-more-posts__hidden {\n  visibility: hidden;\n  text-align: center;\n  margin: 40px;\n}\n\n.no-more-posts__visible {\n  visibility: visible;\n  text-align: center;\n  margin: 40px;\n}\n\n.settings {\n  border: 1px solid black;\n  border-radius: 7px;\n  background-color: #f4e3e3;\n  width: 650px;\n}\n\n.email-setting {\n  width: 100%;\n  padding-right: 30%;\n  padding-left: 20px;\n  height: 100px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  justify-content: end;\n  padding-bottom: 5px;\n  border-bottom: 1px solid #e0908d;\n}\n\n.setting {\n  width: 100%;\n  padding-right: 30%;\n  padding-left: 20px;\n  height: 80px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  justify-content: end;\n  padding-bottom: 5px;\n}\n\n.setting-info {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.setting:not(:last-child) {\n  border-bottom: 1px solid #e0908d;\n}\n\n.setting__span {\n  font-weight: 600;\n  width: 100px;\n  margin-right: 30px;\n}\n\n.setting__input {\n  padding: 10px 0px 10px 10px;\n  border: 1px solid rgb(0, 0, 0, 0.3);\n  font-size: 18px;\n  background-color: var(--input-color);\n  border-radius: 12px;\n  height: 22px;\n}\n\n.accept-setting {\n  height: 70px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n}\n\n.accept-setting__button {\n  background-color: black;\n  color: white;\n  border-radius: 7px;\n  width: 170px;\n  height: 35px;\n  margin-right: 20px;\n}\n\n.cancel-setting__button {\n  background-color: inherit;\n  color: black;\n  border-radius: 7px;\n  width: 200px;\n  height: 35px;\n  font-weight: bold;\n  margin-right: 20px;\n}\n\n.delete-setting__button {\n  background-color: red;\n  color: white;\n  border-radius: 7px;\n  width: 150px;\n  height: 35px;\n  font-weight: bold;\n  margin-top: 40px;\n  margin-bottom: 40px;\n  float: right;\n}\n\n.avatar-setting {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 120px;\n  border-bottom: 1px solid #e0908d;\n  padding: 0px 20px;\n}\n\n.input-avatar__span {\n  padding: 5px 10px;\n  display: block;\n  background-color: var(--background-input-color);\n  color: #000;\n  border: 1px solid #000;\n  border-radius: 12px;\n  font-size: 20px;\n  cursor: pointer;\n  width: 150px;\n  text-align: center;\n  font-weight: 500;\n}\n\n.intput-avatar-setting {\n  position: relative;\n  display: inline-block;\n  transition-duration: var(--tramsform-duration);\n  min-height: fit-content;\n  width: 100%;\n}\n\n.input-avatar-setting__input {\n  position: absolute;\n  z-index: -1;\n  opacity: 0;\n  display: block;\n  width: 0;\n  height: 0;\n}\n\n.setting-avatar-prewatch {\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  margin-left: 30px;\n  object-fit: cover;\n  margin-right: 10px;\n}\n\n.signup-avatar-prewatch {\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  margin-left: auto;\n  object-fit: cover;\n  margin-right: auto;\n}\n\n.custom-alert {\n  position: absolute;\n  top: 100px;\n  box-sizing: border-box;\n  padding: 15px 10px;\n  color: white;\n  border-radius: 7px;\n  right: 60px;\n  height: 50px;\n}\n\n.custom-alert-error {\n  border: 1px solid red;\n  background-color: #e0908d;\n}\n\n.custom-alert-success {\n  border: 1px solid green;\n  background-color: #79ef46;\n}\n\n.custom-alert-warning {\n  border: 1px solid rgb(181, 181, 6);\n  background-color: #c9c907;\n}\n',""]);const u=c},557:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,'/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0-modified | 20110126\n   License: none (public domain)\n*/\n\nhtml,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n}\n\n/* make sure to set some focus styles for accessibility */\n:focus {\n  outline: 0;\n}\n\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\n\nbody {\n  line-height: 1;\n}\n\nol,\nul {\n  list-style: none;\n}\n\nblockquote,\nq {\n  quotes: none;\n}\n\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: "";\n  content: none;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\ninput[type="search"]::-webkit-search-cancel-button,\ninput[type="search"]::-webkit-search-decoration,\ninput[type="search"]::-webkit-search-results-button,\ninput[type="search"]::-webkit-search-results-decoration {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n}\n\ninput[type="search"] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  -webkit-box-sizing: content-box;\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\ntextarea {\n  overflow: auto;\n  vertical-align: top;\n  resize: vertical;\n}\n\n/**\n * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.\n */\n\naudio,\ncanvas,\nvideo {\n  display: inline-block;\n  *display: inline;\n  *zoom: 1;\n  max-width: 100%;\n}\n\n/**\n * Prevent modern browsers from displaying `audio` without controls.\n * Remove excess height in iOS 5 devices.\n */\n\naudio:not([controls]) {\n  display: none;\n  height: 0;\n}\n\n/**\n * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.\n * Known issue: no IE 6 support.\n */\n\n[hidden] {\n  display: none;\n}\n\n/**\n * 1. Correct text resizing oddly in IE 6/7 when body `font-size` is set using\n *    `em` units.\n * 2. Prevent iOS text size adjust after orientation change, without disabling\n *    user zoom.\n */\n\nhtml {\n  font-size: 100%; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -ms-text-size-adjust: 100%; /* 2 */\n}\n\n/**\n * Address `outline` inconsistency between Chrome and other browsers.\n */\n\na:focus {\n  outline: thin dotted;\n}\n\n/**\n * Improve readability when focused and also mouse hovered in all browsers.\n */\n\na:active,\na:hover {\n  outline: 0;\n}\n\n/**\n * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.\n * 2. Improve image quality when scaled in IE 7.\n */\n\nimg {\n  border: 0; /* 1 */\n  -ms-interpolation-mode: bicubic; /* 2 */\n}\n\n/**\n * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.\n */\n\nfigure {\n  margin: 0;\n}\n\n/**\n * Correct margin displayed oddly in IE 6/7.\n */\n\nform {\n  margin: 0;\n}\n\n/**\n * Define consistent border, margin, and padding.\n */\n\nfieldset {\n  border: 1px solid #c0c0c0;\n  margin: 0 2px;\n  padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n * 1. Correct color not being inherited in IE 6/7/8/9.\n * 2. Correct text not wrapping in Firefox 3.\n * 3. Correct alignment displayed oddly in IE 6/7.\n */\n\nlegend {\n  border: 0; /* 1 */\n  padding: 0;\n  white-space: normal; /* 2 */\n  *margin-left: -7px; /* 3 */\n}\n\n/**\n * 1. Correct font size not being inherited in all browsers.\n * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,\n *    and Chrome.\n * 3. Improve appearance and consistency in all browsers.\n */\n\nbutton,\ninput,\nselect,\ntextarea {\n  font-size: 100%; /* 1 */\n  margin: 0; /* 2 */\n  vertical-align: baseline; /* 3 */\n  *vertical-align: middle; /* 3 */\n}\n\n/**\n * Address Firefox 3+ setting `line-height` on `input` using `!important` in\n * the UA stylesheet.\n */\n\nbutton,\ninput {\n  line-height: normal;\n}\n\n/**\n * Address inconsistent `text-transform` inheritance for `button` and `select`.\n * All other form control elements do not inherit `text-transform` values.\n * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.\n * Correct `select` style inheritance in Firefox 4+ and Opera.\n */\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/**\n * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`\n *    and `video` controls.\n * 2. Correct inability to style clickable `input` types in iOS.\n * 3. Improve usability and consistency of cursor style between image-type\n *    `input` and others.\n * 4. Remove inner spacing in IE 7 without affecting normal text inputs.\n *    Known issue: inner spacing remains in IE 6.\n */\n\nbutton,\nhtml input[type="button"], /* 1 */\ninput[type="reset"],\ninput[type="submit"] {\n  -webkit-appearance: button; /* 2 */\n  cursor: pointer; /* 3 */\n  *overflow: visible; /* 4 */\n}\n\n/**\n * Re-set default cursor for disabled elements.\n */\n\nbutton[disabled],\nhtml input[disabled] {\n  cursor: default;\n}\n\n/**\n * 1. Address box sizing set to content-box in IE 8/9.\n * 2. Remove excess padding in IE 8/9.\n * 3. Remove excess padding in IE 7.\n *    Known issue: excess padding remains in IE 6.\n */\n\ninput[type="checkbox"],\ninput[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n  *height: 13px; /* 3 */\n  *width: 13px; /* 3 */\n}\n\n/**\n * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.\n * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome\n *    (include `-moz` to future-proof).\n */\n\ninput[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  -moz-box-sizing: content-box;\n  -webkit-box-sizing: content-box; /* 2 */\n  box-sizing: content-box;\n}\n\n/**\n * Remove inner padding and search cancel button in Safari 5 and Chrome\n * on OS X.\n */\n\ninput[type="search"]::-webkit-search-cancel-button,\ninput[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * Remove inner padding and border in Firefox 3+.\n */\n\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\n  border: 0;\n  padding: 0;\n}\n\n/**\n * 1. Remove default vertical scrollbar in IE 6/7/8/9.\n * 2. Improve readability and alignment in all browsers.\n */\n\ntextarea {\n  overflow: auto; /* 1 */\n  vertical-align: top; /* 2 */\n}\n\n/**\n * Remove most spacing between table cells.\n */\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\nhtml,\nbutton,\ninput,\nselect,\ntextarea {\n  color: #222;\n}\n\n::-moz-selection {\n  background: #b3d4fc;\n  text-shadow: none;\n}\n\n::selection {\n  background: #b3d4fc;\n  text-shadow: none;\n}\n\nimg {\n  vertical-align: middle;\n}\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\ntextarea {\n  resize: vertical;\n}\n\n.chromeframe {\n  margin: 0.2em 0;\n  background: #ccc;\n  color: #000;\n  padding: 0.2em 0;\n}\n',""]);const s=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],s=0;s<t.length;s++){var c=t[s],u=r.base?c[0]+r.base:c[0],l=i[u]||0,f="".concat(u," ").concat(l);i[u]=l+1;var d=n(f),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var h=o(p,r);r.byIndex=s,e.splice(s,0,{identifier:f,updater:h,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=n(i[a]);e[s].references--}for(var c=r(t,o),u=0;u<i.length;u++){var l=n(i[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t="https://socio-project.ru/api/v1";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(){r=function(){return n};var t,n={},o=Object.prototype,i=o.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),s=new T(r||[]);return a(i,"_invoke",{value:j(t,n,s)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var h="suspendedStart",y="suspendedYield",v="executing",m="completed",b={};function g(){}function w(){}function x(){}var E={};f(E,c,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(N([])));L&&L!==o&&i.call(L,c)&&(E=L);var S=x.prototype=g.prototype=Object.create(E);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,n){function r(o,a,s,c){var u=p(t[o],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==e(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):n.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(t,e){function i(){return new n((function(n,o){r(t,e,n,o)}))}return o=o?o.then(i,i):i()}})}function j(e,n,r){var o=h;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=O(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=p(e,n,r);if("normal"===u.type){if(o=r.done?m:y,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=p(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function N(n){if(n||""===n){var r=n[c];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,a=function e(){for(;++o<n.length;)if(i.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(e(n)+" is not iterable")}return w.prototype=x,a(S,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},n.awrap=function(t){return{__await:t}},_(P.prototype),f(P.prototype,u,(function(){return this})),n.AsyncIterator=P,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new P(d(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(S),f(S,l,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},n}function o(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,c,"next",t)}function c(t){o(a,r,i,s,c,"throw",t)}s(void 0)}))}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}const c=new(function(){return e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"updateCSRFToken",value:(c=i(r().mark((function e(){var n,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t,"/csrf/"),{method:"GET",credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:if(o=e.sent,401!==n.status){e.next=8;break}return e.abrupt("return",!1);case 8:return this.csrfToken=o.body.csrfToken,e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"addCSRFToken",value:(s=i(r().mark((function t(e,n){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.headers?n.headers["X-CSRF-Token"]=this.csrfToken:n.headers={"X-CSRF-Token":this.csrfToken},t.next=3,fetch(e,n);case 3:if(403!==(o=t.sent).status){t.next=10;break}return t.next=7,this.updateCSRFToken();case 7:n.headers["X-CSRF-Token"]=this.csrfToken,t.next=11;break;case 10:return t.abrupt("return",o);case 11:return t.abrupt("return",fetch(e,n));case 12:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"addCSRFTokenWebSocket",value:(o=i(r().mark((function t(e,n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.csrfToken=this.csrfToken,e.send(JSON.stringify(n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})}],n&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o,s,c}());function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(){l=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new T(r||[]);return o(a,"_invoke",{value:j(t,n,s)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",y="suspendedYield",v="executing",m="completed",b={};function g(){}function w(){}function x(){}var E={};f(E,a,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(N([])));L&&L!==n&&r.call(L,a)&&(E=L);var S=x.prototype=g.prototype=Object.create(E);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(o,i,a,s){var c=p(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,n,r){var o=h;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=O(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=p(e,n,r);if("normal"===u.type){if(o=r.done?m:y,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=p(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=x,o(S,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},_(P.prototype),f(P.prototype,s,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new P(d(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(S),f(S,c,"Generator"),f(S,a,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function f(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){f(i,r,o,a,s,"next",t)}function s(t){f(i,r,o,a,s,"throw",t)}a(void 0)}))}}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function y(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}var b=function(t,e,n){return{status:t,body:e,error:n}},g=function(){return y((function e(){p(this,e),v(this,"baseUrl","".concat(t,"/auth/"))}),[{key:"login",value:(r=d(l().mark((function t(e,n){var r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.baseUrl+"login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n}),credentials:"include"});case 2:return r=t.sent,t.next=5,r.json();case 5:return o=t.sent,t.abrupt("return",b(r.status,o.body,o.message));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"sign_up",value:(n=d(l().mark((function t(e,n,r,o,i,a,s){var c,u,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=new FormData).append("firstName",e),c.append("lastName",n),c.append("email",r),c.append("password",o),c.append("repeatPassword",i),c.append("dateOfBirth",a),c.append("avatar",s),t.next=10,fetch(this.baseUrl+"signup",{method:"POST",body:c,credentials:"include"});case 10:return u=t.sent,t.next=13,u.json();case 13:return f=t.sent,t.abrupt("return",b(u.status,f.body,f.message));case 15:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i,a,s){return n.apply(this,arguments)})},{key:"logout",value:(e=d(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(this.baseUrl+"logout",{method:"DELETE",credentials:"include"});case 2:if(!(e=t.sent).ok){t.next=5;break}return t.abrupt("return",b(e.status,null,null));case 5:return t.next=7,e.json();case 7:return n=t.sent,t.abrupt("return",b(e.status,n.body,n.message));case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]);var e,n,r}(),w=function(){return y((function e(){p(this,e),v(this,"baseUrl","".concat(t,"/profile/"))}),[{key:"getOwnProfileData",value:(o=d(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl,{method:"GET",credentials:"include"});case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",b(e.status,n.body,n.message));case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getOtherProfileData",value:(r=d(l().mark((function t(e){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl+"".concat(e),{method:"GET",credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",b(n.status,r.body,r.message));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"updateProfileData",value:(n=d(l().mark((function t(e,n,r,o,i,a){var s,u,f;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=new FormData).append("firstName",e),s.append("lastName",n),s.append("email",r),""!==o&&(s.append("password",o),s.append("repeatPassword",i)),s.append("avatar",a),t.next=8,c.addCSRFToken(this.baseUrl,{method:"PUT",body:s,credentials:"include"});case 8:return u=t.sent,t.next=11,u.json();case 11:return f=t.sent,t.abrupt("return",b(u.status,f.body,f.message));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,r,o,i,a){return n.apply(this,arguments)})},{key:"deleteProfile",value:(e=d(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl,{method:"DELETE",credentials:"include"});case 2:if(!(e=t.sent).ok){t.next=5;break}return t.abrupt("return",b(e.status,null,null));case 5:return t.next=7,e.json();case 7:return n=t.sent,t.abrupt("return",b(e.status,n.body,n.message));case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]);var e,n,r,o}(),x=function(){return y((function e(){p(this,e),v(this,"baseUrl","".concat(t,"/posts/"))}),[{key:"getPosts",value:(a=d(l().mark((function t(e,n){var r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl+"?userId=".concat(e,"&lastPostId=").concat(n,"&postsAmount=0"),{method:"GET",credentials:"include"});case 2:return r=t.sent,t.next=5,r.json();case 5:return o=t.sent,t.abrupt("return",b(r.status,o.body,o.message));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"getCurrentPost",value:(i=d(l().mark((function t(e){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl+e,{method:"GET",credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",b(n.status,r.body,r.message));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"getFriendsPosts",value:(o=d(l().mark((function t(e){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl+"friends?lastPostId=".concat(e,"&postsAmount=0"),{method:"GET",credentials:"include"});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",b(n.status,r.body,r.message));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"publishPost",value:(r=d(l().mark((function t(e,n){var r,o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("content",e),Array.from(n).forEach((function(t){r.append("attachments",t)})),t.next=5,c.addCSRFToken(this.baseUrl,{method:"POST",credentials:"include",body:r});case 5:return o=t.sent,t.next=8,o.json();case 8:return i=t.sent,t.abrupt("return",b(o.status,i.body,i.message));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"deletePost",value:(n=d(l().mark((function t(e){var n,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Number(e),t.next=3,c.addCSRFToken(this.baseUrl,{method:"DELETE",credentials:"include",body:JSON.stringify({postId:n})});case 3:if(204!==(r=t.sent).status){t.next=6;break}return t.abrupt("return",b(r.status,null,null));case 6:return t.next=8,r.json();case 8:return o=t.sent,t.abrupt("return",b(r.status,o.body,o.message));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"updatePost",value:(e=d(l().mark((function t(e,n){var r,o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Number(e),t.next=3,c.addCSRFToken(this.baseUrl,{method:"PUT",credentials:"include",body:JSON.stringify({postId:r,content:n})});case 3:return o=t.sent,t.next=6,o.json();case 6:return i=t.sent,t.abrupt("return",b(o.status,i.body,i.message));case 8:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]);var e,n,r,o,i,a}(),E=function(){return y((function e(){p(this,e),v(this,"baseUrl","".concat(t,"/chat"))}),[{key:"getDialogs",value:(n=d(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl+"/dialogs",{method:"GET",credentials:"include"});case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",b(e.status,n.body,n.message));case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getMessages",value:(e=d(l().mark((function t(e,n){var r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl+"/messages?peerId=".concat(e,"&lastMessageId=").concat(n),{method:"GET",credentials:"include"});case 2:return r=t.sent,t.next=5,r.json();case 5:return o=t.sent,t.abrupt("return",b(r.status,o.body,o.message));case 7:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]);var e,n}(),k=function(){return y((function e(){p(this,e),v(this,"baseUrl","".concat(t,"/subscriptions/friends"))}),[{key:"getFriends",value:(e=d(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl,{method:"GET",credentials:"include"});case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",b(e.status,n.body,n.message));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]);var e}(),L=function(){return y((function e(){p(this,e),v(this,"baseUrl","".concat(t,"/subscriptions/subscribers"))}),[{key:"getSubscribers",value:(e=d(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl,{method:"GET",credentials:"include"});case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",b(e.status,n.body,n.message));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]);var e}(),S=function(){return y((function e(){p(this,e),v(this,"baseUrl","".concat(t,"/subscriptions/"))}),[{key:"getSubscriptions",value:(r=d(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.addCSRFToken(this.baseUrl+"subscriptions",{method:"GET",credentials:"include"});case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",b(e.status,n.body,n.message));case 7:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"postSubscription",value:(n=d(l().mark((function t(e){var n,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Number(e),t.next=3,c.addCSRFToken(this.baseUrl,{method:"POST",credentials:"include",body:JSON.stringify({subscribedTo:n})});case 3:return r=t.sent,t.next=6,r.json();case 6:return o=t.sent,t.abrupt("return",b(r.status,o.body,o.message));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"deleteSubscription",value:(e=d(l().mark((function t(e){var n,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Number(e),t.next=3,c.addCSRFToken(this.baseUrl,{method:"DELETE",credentials:"include",body:JSON.stringify({subscribedTo:n})});case 3:if(204!==(r=t.sent).status){t.next=6;break}return t.abrupt("return",b(r.status,null,null));case 6:return o=r.json(),t.abrupt("return",b(r.status,o.body,o.message));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e,n,r}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var e=function(t,e){if("object"!=_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}function O(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var B=["/login","/signup"],I=new WeakMap,T=function(){return t=function t(){var e,n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=this,n=I),n.set(e,r);var i=document.body;this.profileService=new w,i.addEventListener("click",(function(t){for(var e=t.target;"body"!==e.nodeName.toLowerCase();){if("a"===e.nodeName.toLowerCase()){t.preventDefault();var n=e.getAttribute("href");n!==window.location.pathname&&o.redirect(n);break}e=e.parentNode}}),{capture:!0}),window.onpopstate=function(t){o.redirect(t.state.url,!1)}},e=[{key:"setConfig",value:function(t){var e,n;n=t,(e=I).set(O(e,this),n)}},{key:"redirect",value:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(e=I,this,e.get(O(e,this))).paths.find((function(e){return null!==e.path.exec(t)})),o=r.path.exec(t).groups;"feed"===r.akaPath&&(t="feed");var i={url:t};n&&-1===B.indexOf(t)&&history.pushState(i,"",t),document.title="Socio - ".concat(r.title),document.onscroll=null,document.onkeydown=null,r.func(o)}}],e&&P(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function F(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:e+""}const C=F((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=e}));function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function z(){z=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==R(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(R(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function G(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function D(t){var e=function(t,e){if("object"!=R(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}const H=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"updateState",value:(n=z().mark((function t(){var e,n;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new w,t.next=3,e.getOwnProfileData();case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0?7:16;break;case 7:return this.userId=n.body.User.userId,this.avatar=n.body.User.avatar,this.firstName=n.body.User.firstName,this.lastName=n.body.User.lastName,this.createdAt=n.body.User.createdAt,this.updatedAt=n.body.User.updatedAt,this.email=n.body.User.email,this.dateOfBirth=n.body.User.dateOfBirth,t.abrupt("return",!0);case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,this)})),r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){G(i,r,o,a,s,"next",t)}function s(t){G(i,r,o,a,s,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})}],e&&U(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}());function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function V(){V=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==W(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(W(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Y(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J(r.key),r)}}function J(t){var e=function(t,e){if("object"!=W(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}function K(t,e,n){return e=$(e),function(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,X()?Reflect.construct(e,n||[],$(t).constructor):e.apply(t,n))}function X(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(X=function(){return!!t})()}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}const Z=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=K(this,e,[t])).webSocket=n,r.eventBus.addEventListener("attemptSignup",r.isValidForm.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(e,t),n=e,r=[{key:"isValidForm",value:(o=V().mark((function t(e){var n,r,o,i,a,s,u,l,f;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.firstName,r=e.lastName,o=e.email,i=e.password,a=e.repeatPassword,s=e.dateOfBirth,u=e.avatar,l=new g,t.next=4,l.sign_up(n,r,o,i,a,s,u);case 4:f=t.sent,t.t0=f.status,t.next=201===t.t0?8:400===t.t0?19:21;break;case 8:return t.next=10,c.updateCSRFToken();case 10:return t.next=12,H.updateState();case 12:if(!t.sent){t.next=17;break}this.webSocket.openWebSocket(),this.eventBus.emit("receiveSignupResult",!0),t.next=18;break;case 17:this.eventBus.emit("receiveSignupResult",!1);case 18:return t.abrupt("break",22);case 19:return this.eventBus.emit("receiveSignupResult",!1),t.abrupt("break",22);case 21:this.eventBus.emit("serverError",{});case 22:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Y(i,n,r,a,s,"next",t)}function s(t){Y(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],r&&q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i}(C);function tt(t){return t.length>=6}function et(t){return null!==t.match(/@/)}function nt(t,e,n){var r=parseInt(t),o=parseInt(e),i=parseInt(n);if(Number.isNaN(r)||Number.isNaN(o)||Number.isNaN(i))return!1;var a=new Date(i,o-1,r),s=new Date;return!(a.getDate()!==r||a.getMonth()+1!==o||a.getFullYear()!==i||i>=s.getFullYear()||i<1900)}function rt(t){return null!==t.match(/^[a-zа-я ,.'-]+$/i)}var ot="Пароль должен иметь длину не менее 6 символов",it="Некорректная почта",at="Некорретное имя";function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ut(r.key),r)}}function ut(t){var e=function(t,e){if("object"!=st(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==st(e)?e:e+""}const lt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=e},(e=[{key:"render",value:function(t){}}])&&ct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function dt(){dt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ft(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(ft(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function pt(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function ht(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){pt(i,r,o,a,s,"next",t)}function s(t){pt(i,r,o,a,s,"throw",t)}a(void 0)}))}}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vt(r.key),r)}}function vt(t){var e=function(t,e){if("object"!=ft(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ft(e)?e:e+""}function mt(t,e,n){return e=gt(e),function(t,e){if(e&&("object"===ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bt()?Reflect.construct(e,n||[],gt(t).constructor):e.apply(t,n))}function bt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bt=function(){return!!t})()}function gt(t){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gt(t)}function wt(t,e){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wt(t,e)}var xt="form__input__correct",Et=["webp","jpg","jpeg","png","bmp","gif"],kt=[{inscription:"Фамилия",incorrect:"incorrect-last-name",incorrectText:at,id:"last-name",type:"text",name:"last_name",placeholder:"Фамилия",isPassword:!1},{inscription:"Имя",incorrect:"incorrect-first-name",incorrectText:at,id:"first-name",type:"text",name:"first_name",placeholder:"Имя",isPassword:!1},{inscription:"Почта",incorrect:"incorrect-email",incorrectText:it,id:"email",type:"email",name:"email",placeholder:"Почта",isPassword:!1},{inscription:"Пароль",incorrect:"incorrect-password",incorrectText:ot,id:"password",type:"password",name:"password",placeholder:"Пароль",isPassword:!0},{inscription:"Повторите пароль",incorrect:"incorrect-repeat-password",incorrectText:"Пароли должны совпадать",id:"repeat-password",type:"password",name:"repeat_password",placeholder:"Повторите пароль",isPassword:!0}],Lt=[{id:"day",placeholder:"ДД"},{id:"month",placeholder:"ММ"},{id:"year",placeholder:"ГГГГ"}];const St=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mt(this,e,[t])).eventBus.addEventListener("receiveSignupResult",n.handleSignupResult.bind(n)),n.eventBus.addEventListener("serverError",n.handleServerError.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(e,t),n=e,(r=[{key:"render",value:function(t){var e=this,n=Handlebars.templates["signup.hbs"];t.innerHTML=n({main_inputs:kt,part_of_date:Lt});var r=document.getElementById("email"),o=document.getElementById("password"),i=document.getElementById("repeat-password"),a=document.getElementById("first-name"),s=document.getElementById("last-name"),c=document.getElementById("day"),u=document.getElementById("month"),l=document.getElementById("year"),f=document.getElementById("avatar"),d=document.getElementById("incorrect-avatar"),p=document.getElementById("signup-show-password"),h=document.getElementById("signup-show-repeat-password"),y=document.getElementById("incorrect-email"),v=document.getElementById("incorrect-password"),m=document.getElementById("incorrect-repeat-password"),b=document.getElementById("incorrect-first-name"),g=document.getElementById("incorrect-last-name"),w=document.getElementById("incorrect-date-of-birthday");r.addEventListener("focusout",(function(){y.classList.add(xt),et(r.value.trim())||y.classList.remove(xt)})),o.addEventListener("focusout",(function(){v.classList.add(xt),tt(o.value)||v.classList.remove(xt),o.value!==i.value&&m.classList.remove(xt)})),i.addEventListener("focusout",(function(){m.classList.add(xt),o.value!==i.value&&m.classList.remove(xt)})),a.addEventListener("focusout",(function(){b.classList.add(xt),rt(a.value.trim())||b.classList.remove(xt)})),s.addEventListener("focusout",(function(){g.classList.add(xt),rt(s.value.trim())||g.classList.remove(xt)})),c.addEventListener("focusout",(function(){w.classList.add(xt),nt(c.value,u.value,l.value)||w.classList.remove(xt)})),u.addEventListener("focusout",(function(){w.classList.add(xt),nt(c.value,u.value,l.value)||w.classList.remove(xt)})),l.addEventListener("focusout",(function(){w.classList.add(xt),nt(c.value,u.value,l.value)||w.classList.remove(xt)})),p.addEventListener("click",(function(){"password"==o.getAttribute("type")?o.setAttribute("type","text"):o.setAttribute("type","password")})),h.addEventListener("click",(function(){"password"==i.getAttribute("type")?i.setAttribute("type","text"):i.setAttribute("type","password")})),f.addEventListener("change",(function(){d.classList.add(xt);var t,e=f.files[0],n=URL.createObjectURL(e),r=(t=e.name.split("."))[t.length-1];Et.includes(r)?document.getElementById("prewatch").setAttribute("src",n):(d.classList.remove(xt),f.files=null)})),document.getElementById("button-sign-up").addEventListener("click",ht(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isValidForm();case 1:case"end":return t.stop()}}),t)}))))}},{key:"handleSignupResult",value:function(t){var e=document.getElementById("repeat-email");t?(document.body.innerHTML="",this.eventBus.emit("signupSuccess","/feed")):e.classList.remove(xt)}},{key:"handleServerError",value:function(){document.getElementById("server-error").classList.remove(xt)}},{key:"isValidForm",value:function(){var t=document.getElementById("email"),e=document.getElementById("password"),n=document.getElementById("repeat-password"),r=document.getElementById("first-name"),o=document.getElementById("last-name"),i=document.getElementById("day"),a=document.getElementById("month"),s=document.getElementById("year"),c=document.getElementById("avatar"),u=document.getElementById("incorrect-avatar"),l=document.getElementById("incorrect-email"),f=document.getElementById("incorrect-password"),d=document.getElementById("incorrect-repeat-password"),p=document.getElementById("incorrect-first-name"),h=document.getElementById("incorrect-last-name"),y=document.getElementById("incorrect-date-of-birthday"),v=document.getElementById("repeat-email");l.classList.add(xt),d.classList.add(xt),f.classList.add(xt),p.classList.add(xt),h.classList.add(xt),y.classList.add(xt),u.classList.add(xt);var m=!0;et(t.value)||(l.classList.remove(xt),m=!1),e.value!=n.value&&(d.classList.remove(xt),m=!1),tt(e.value)||(f.classList.remove(xt),m=!1),rt(r.value)||(p.classList.remove(xt),m=!1),rt(o.value)||(h.classList.remove(xt),m=!1),nt(i.value,a.value,s.value)||(y.classList.remove(xt),m=!1);var b,g=(b=c.files[0].name.split("."))[b.length-1];if(Et.includes(g)||(u.classList.remove(xt),m=!1),!m)return!1;var w="".concat(s.value,"-").concat(a.value.padStart(2,"0"),"-").concat(i.value.padStart(2,"0"));v.classList.add("correct");var x={firstName:r.value,lastName:o.value,email:t.value,password:e.value,repeatPassword:n.value,dateOfBirth:w,avatar:c.files[0]};this.eventBus.emit("attemptSignup",x)}}])&&yt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jt(r.key),r)}}function jt(t){var e=function(t,e){if("object"!=_t(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_t(e)?e:e+""}var Ot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.incomingEvents=e,this.handlers={}},(e=[{key:"addEventListener",value:function(t,e){if(!this.incomingEvents.includes(t))throw new Error("Event is not allowed");this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)}},{key:"emit",value:function(t,e){if(!this.incomingEvents.includes(t))throw new Error("Event is not allowed");this.handlers[t]&&this.handlers[t].forEach((function(t){t(e)}))}}])&&Pt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const Bt=Ot;function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nt(r.key),r)}}function Nt(t){var e=function(t,e){if("object"!=It(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==It(e)?e:e+""}function Mt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ft(t,e,n){return t.set(At(t,e),n),n}function At(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Ct=["attemptSignup","signupSuccess","receiveSignupResult","serverError"],Rt=new WeakMap,zt=new WeakMap,Gt=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Mt(this,Rt,void 0),Mt(this,zt,void 0),this.eventBus=new Bt(Ct),Ft(zt,this,new Z(this.eventBus,n)),Ft(Rt,this,new St(this.eventBus)),this.eventBus.addEventListener("signupSuccess",e.redirect.bind(e))},(e=[{key:"renderSignupView",value:function(){var t;(t=Rt,this,t.get(At(t,this))).render(document.body)}}])&&Tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function Dt(){Dt=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ut(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Ut(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Ht(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Wt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ht(i,r,o,a,s,"next",t)}function s(t){Ht(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yt(r.key),r)}}function Yt(t){var e=function(t,e){if("object"!=Ut(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ut(e)?e:e+""}function qt(t,e,n){return e=Kt(e),function(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jt()?Reflect.construct(e,n||[],Kt(t).constructor):e.apply(t,n))}function Jt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jt=function(){return!!t})()}function Kt(t){return Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kt(t)}function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}const $t=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=qt(this,e,[t])).router=n,o.webSocket=r,o.profileService=new w,o.postService=new x,o.subscriptionsService=new S,o.eventBus.addEventListener("clickLogoutButton",o.logout.bind(o)),o.eventBus.addEventListener("readyRenderProfile",o.getProfileData.bind(o)),o.eventBus.addEventListener("clickedSubscribe",o.subscribeToUser.bind(o)),o.eventBus.addEventListener("clickedUnsubscribe",o.unsubscribeFromUser.bind(o)),o.eventBus.addEventListener("readyRenderPosts",o.getPosts.bind(o)),o.eventBus.addEventListener("clickedPublishPost",o.publishPost.bind(o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(e,t),n=e,r=[{key:"getProfileData",value:(u=Wt(Dt().mark((function t(e){var n;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.profileService.getOtherProfileData(e);case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("receiveProfileData",n.body),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"subscribeToUser",value:(c=Wt(Dt().mark((function t(e){var n;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriptionsService.postSubscription(e);case 2:n=t.sent,t.t0=n.status,t.next=201===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("subscribedSuccess",{}),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"unsubscribeFromUser",value:(s=Wt(Dt().mark((function t(e){var n;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriptionsService.deleteSubscription(e);case 2:n=t.sent,t.t0=n.status,t.next=204===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("unsubscribedSuccess",{}),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"getPosts",value:(a=Wt(Dt().mark((function t(e){var n,r,o;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.userId,r=e.lastPostId,t.next=3,this.postService.getPosts(n,r);case 3:o=t.sent,t.t0=o.status,t.next=200===t.t0?7:401===t.t0?9:11;break;case 7:return this.eventBus.emit("getPostsSuccess",o.body),t.abrupt("break",12);case 9:return this.router.redirect("/login"),t.abrupt("break",12);case 11:this.eventBus.emit("serverError",{});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"publishPost",value:(i=Wt(Dt().mark((function t(e){var n,r,o;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.content,r=e.attachments,t.next=3,this.postService.publishPost(n,r);case 3:o=t.sent,t.t0=o.status,t.next=201===t.t0?7:401===t.t0?9:11;break;case 7:return this.eventBus.emit("publishedPostSuccess",o.body),t.abrupt("break",12);case 9:return this.router.redirect("/login"),t.abrupt("break",12);case 11:this.eventBus.emit("serverError",{});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"logout",value:(o=Wt(Dt().mark((function t(){var e,n;return Dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new g,t.next=3,e.logout();case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0||401===t.t0?7:9;break;case 7:return this.router.redirect("/login"),t.abrupt("break",10);case 9:this.eventBus.emit("serverError",{});case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&Vt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a,s,c,u}(C);var Qt=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];function Zt(t){var e=new Date(t);return"".concat(e.getDate()," ").concat(Qt[e.getMonth()]," ").concat(e.getFullYear())}function te(t){var e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return"".concat(e.getDate()," ").concat(Qt[e.getMonth()]," ").concat(e.getFullYear()," в ").concat(n,":").concat(r)}function ee(t){var e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return"".concat(n,":").concat(r)}function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oe(r.key),r)}}function oe(t){var e=function(t,e){if("object"!=ne(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ne(e)?e:e+""}function ie(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var ae="".concat(t,"/static"),se=new WeakMap,ce=function(){return t=function t(e){var n,r,o,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=void 0,function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(o=this,i=se),i.set(o,a),r=e,(n=se).set(ie(n,this),r)},(e=[{key:"renderForm",value:function(t){var e,n=t.userId,r=t.firstName,o=t.lastName,i=t.avatar;if(document.onscroll=null,null===document.getElementById("header")){var a=Handlebars.templates["header.hbs"];(e=se,this,e.get(ie(e,this))).innerHTML+=a({avatar:i,firstName:r,lastName:o,userId:n,staticUrl:ae})}}}])&&re(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fe(r.key),r)}}function fe(t){var e=function(t,e){if("object"!=ue(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ue(e)?e:e+""}function de(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var pe=[{href:"/feed",text:"Новости"},{href:"/messenger",text:"Мессенджер"},{href:"/community/friends",text:"Друзья"},{href:"/groups",text:"Сообщества"},{href:"/settings",text:"Настройки"},{href:"/stickers",text:"Стикеры"}],he=new WeakMap,ye=function(){return t=function t(e){var n,r,o,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=void 0,function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(o=this,i=he),i.set(o,a),r=e,(n=he).set(de(n,this),r)},(e=[{key:"renderForm",value:function(t){if(null===document.getElementById("main")){var e=Handlebars.templates["main.hbs"],n=pe.concat({href:"/profile/".concat(t),text:"Профиль"});(r=he,this,r.get(de(r,this))).innerHTML+=e({fullSidebar:n})}var r;document.getElementById("server-error-500").classList.add("server-error-500")}}])&&le(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function me(){me=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ve(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(ve(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function be(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function ge(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){be(i,r,o,a,s,"next",t)}function s(t){be(i,r,o,a,s,"throw",t)}a(void 0)}))}}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xe(r.key),r)}}function xe(t){var e=function(t,e){if("object"!=ve(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ve(e)?e:e+""}function Ee(t,e,n){return e=Le(e),function(t,e){if(e&&("object"===ve(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ke()?Reflect.construct(e,n||[],Le(t).constructor):e.apply(t,n))}function ke(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ke=function(){return!!t})()}function Le(t){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Le(t)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}const _e=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ee(this,e,[t])).profileService=new w,r.postService=new x,r.router=n,r.eventBus.addEventListener("clickedUpdatePost",r.updatePost.bind(r)),r.eventBus.addEventListener("canceledUpdatePost",r.getCurrentPost.bind(r)),r.eventBus.addEventListener("clickedDeleteButton",r.deletePost.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(e,t),n=e,r=[{key:"getCurrentPost",value:(a=ge(me().mark((function t(e){var n;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.postService.getCurrentPost(e);case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("postCanceledSuccess",n.body),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"updatePost",value:(i=ge(me().mark((function t(e){var n,r,o;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.postId,r=e.content,t.next=3,this.postService.updatePost(n,r);case 3:o=t.sent,t.t0=o.status,t.next=200===t.t0?7:401===t.t0?9:11;break;case 7:return this.eventBus.emit("postUpdateSuccess",o.body),t.abrupt("break",12);case 9:return this.router.redirect("/login"),t.abrupt("break",12);case 11:this.eventBus.emit("serverError",{});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"deletePost",value:(o=ge(me().mark((function t(e){var n;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.postService.deletePost(e);case 2:n=t.sent,t.t0=n.status,t.next=204===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("postDeleteSuccess",e),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],r&&we(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(C);function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oe(r.key),r)}}function Oe(t){var e=function(t,e){if("object"!=Pe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pe(e)?e:e+""}function Be(t,e,n){return e=Te(e),function(t,e){if(e&&("object"===Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ie()?Reflect.construct(e,n||[],Te(t).constructor):e.apply(t,n))}function Ie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ie=function(){return!!t})()}function Te(t){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Te(t)}function Ne(t,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ne(t,e)}var Me="".concat(t,"/static");const Fe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Be(this,e,[t])).eventBus.addEventListener("postDeleteSuccess",n.deletePost.bind(n)),n.eventBus.addEventListener("postUpdateSuccess",n.updatePost.bind(n)),n.eventBus.addEventListener("postCanceledSuccess",n.canceledUpdatePost.bind(n)),n.eventBus.addEventListener("serverError",n.serverErrored.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}(e,t),n=e,(r=[{key:"renderPost",value:function(t){var e=this,n=t.post,r=t.author,o=t.publish,i=H.userId,a=H.avatar,s=Handlebars.templates["post.hbs"],c=n.postId;if(""!==n.content.trim()||n.attachments){var u=Number(r.userId)===Number(i),l=n.createdAt!==n.updatedAt;n.createdAt=te(n.createdAt),n.updatedAt="обновлено ".concat(te(n.updatedAt)),this.mainElement=document.getElementById("posts"),o?this.mainElement.innerHTML=s({post:n,author:r,avatar:a,staticUrl:Me,isMe:u,hasUpdated:l})+this.mainElement.innerHTML:this.mainElement.innerHTML+=s({post:n,author:r,avatar:a,staticUrl:Me,isMe:u,hasUpdated:l});var f=document.getElementById("textarea-".concat(c));f.style.height=f.scrollHeight-4+"px";var d=document.getElementById("post-content-".concat(c));if(d.scrollHeight>1e3){d.style.height="1000px";var p=document.createElement("button");p.classList.add("post-content__show-more-button"),p.setAttribute("data-id",c),p.innerHTML="Показать ещё",d.appendChild(p)}document.querySelectorAll(".reactions__heart-img").forEach((function(t){t.addEventListener("mouseover",(function(){t.setAttribute("src","../static/images/filled-heart.png"),t.style.width="28px",t.style.height="28px"})),t.addEventListener("mouseout",(function(){t.setAttribute("src","../static/images/heart.png"),t.style.width="25px",t.style.height="25px"}))})),document.querySelectorAll(".post-author__edit-img").forEach((function(t){t.addEventListener("click",(function(){var n=t.parentNode,r=t.nextElementSibling,o=t.dataset.id,i=document.getElementById("textarea-".concat(o));i.removeAttribute("readonly"),i.addEventListener("input",(function(){i.style.height="auto",i.style.height=i.scrollHeight-4+"px"})),i.focus();var a=document.createElement("img");a.classList.add("post-author__accept-img"),a.setAttribute("data-id",o),a.setAttribute("src","../static/images/check.png"),a.addEventListener("click",(function(){""!==i.value.trim()&&e.eventBus.emit("clickedUpdatePost",{content:i.value,attachments:null,postId:o})}));var s=document.createElement("img");s.classList.add("post-author__cancel-img"),s.setAttribute("data-id",o),s.setAttribute("src","../static/images/cancel.png"),s.addEventListener("click",(function(){e.eventBus.emit("canceledUpdatePost",o)})),n.appendChild(a),n.appendChild(s),t.style.display="none",r.style.display="none"}))})),document.querySelectorAll(".post-author__trash-basket-img").forEach((function(t){t.addEventListener("click",(function(){e.eventBus.emit("clickedDeleteButton",t.dataset.id)}))})),document.querySelectorAll(".post-content__show-more-button").forEach((function(t){t.addEventListener("click",(function(){var e=document.getElementById("post-content-".concat(t.dataset.id));e.style.height=e.scrollHeight-4+"px",t.remove()}))}))}else this.eventBus.emit("clickedDeleteButton",c)}},{key:"updatePost",value:function(t){var e=t.postId,n=t.updatedAt,r=document.getElementById("post-menu-".concat(e)),o=document.getElementById("textarea-".concat(e)),i=document.getElementById("edited-".concat(e));if(i)i.innerHTML="обновлено ".concat(te(n));else{var a=document.getElementById("post-author-time-".concat(e)),s=document.createElement("img");s.setAttribute("src","../static/images/dot.png"),s.classList.add("post-author-time__dot-img");var c=document.createElement("span");c.setAttribute("id","edited-".concat(e)),c.classList.add("post-author-time__last-time-span"),c.innerHTML="обновлено ".concat(te(n)),a.appendChild(s),a.appendChild(c)}o.toggleAttribute("readonly"),r.lastChild.remove(),r.lastChild.remove(),r.firstElementChild.style.display="block",r.firstElementChild.nextElementSibling.style.display="block"}},{key:"canceledUpdatePost",value:function(t){var e=document.getElementById("post-menu-".concat(t.postId)),n=document.getElementById("textarea-".concat(t.postId));n.toggleAttribute("readonly"),n.value=t.content,e.lastChild.remove(),e.lastChild.remove(),e.firstElementChild.style.display="block",e.firstElementChild.nextElementSibling.style.display="block"}},{key:"deletePost",value:function(t){var e=document.getElementById("post-".concat(t));null==e||e.remove()}},{key:"serverErrored",value:function(){document.getElementById("server-error-500").classList.remove("server-error-500")}}])&&je(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Re(r.key),r)}}function Re(t){var e=function(t,e){if("object"!=Ae(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ae(e)?e:e+""}var ze=["clickedUpdatePost","canceledUpdatePost","postCanceledSuccess","clickedDeleteButton","postUpdateSuccess","postDeleteSuccess","serverError"];const Ge=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new Bt(ze),this.postModel=new _e(this.eventBus,e),this.postView=new Fe(this.eventBus)},(e=[{key:"renderPostView",value:function(t){this.postView.renderPost(t)}}])&&Ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,He(r.key),r)}}function He(t){var e=function(t,e){if("object"!=Ue(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ue(e)?e:e+""}function We(t,e,n){return e=Ye(e),function(t,e){if(e&&("object"===Ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ve()?Reflect.construct(e,n||[],Ye(t).constructor):e.apply(t,n))}function Ve(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ve=function(){return!!t})()}function Ye(t){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ye(t)}function qe(t,e){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qe(t,e)}var Je="".concat(t,"/static");const Ke=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=We(this,e,[t])).router=n,r.postController=new Ge(n),r.eventBus.addEventListener("receiveOwnProfileData",r.renderProfileMain.bind(r)),r.eventBus.addEventListener("receiveProfileData",r.renderProfile.bind(r)),r.eventBus.addEventListener("receiveProfilePosts",r.renderPosts.bind(r)),r.eventBus.addEventListener("subscribedSuccess",r.updateSubscribed.bind(r)),r.eventBus.addEventListener("unsubscribedSuccess",r.updateUnsubscribed.bind(r)),r.eventBus.addEventListener("getPostsSuccess",r.renderPosts.bind(r)),r.eventBus.addEventListener("publishedPostSuccess",r.postPublishedSuccess.bind(r)),r.eventBus.addEventListener("serverError",r.serverErrored.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qe(t,e)}(e,t),n=e,(r=[{key:"renderProfileMain",value:function(t){var e=this;this.userId=t;var n=H.userId,r=H.avatar,o=H.firstName,i=H.lastName;new ce(document.body).renderForm({userId:n,avatar:r,firstName:o,lastName:i}),new ye(document.body).renderForm(n),document.getElementById("logout-button").addEventListener("click",(function(){e.eventBus.emit("clickLogoutButton",{})})),this.eventBus.emit("readyRenderProfile",this.userId)}},{key:"checksNewPosts",value:function(){document.body.scrollHeight-window.scrollY<=1500&&!this.isAllPosts&&!this.isWaitPosts&&(this.eventBus.emit("readyRenderPosts",{userId:this.userId,lastPostId:this.lastPostId}),this.isWaitPosts=!0)}},{key:"renderProfile",value:function(t){var e=this,n=t.User,r=t.isSubscribedTo,o=t.isSubscriber;n.dateOfBirth=Zt(n.dateOfBirth);var i=n.userId,a=n.firstName,s=n.lastName,c=n.dateOfBirth,u=n.avatar;this.mainElement=document.getElementById("activity"),this.isSubscriber=o;var l=this.isMe=Number(this.userId)===Number(H.userId),f=Handlebars.templates["profileMain.hbs"];this.mainElement.innerHTML=f({avatar:u,firstName:a,lastName:s,dateOfBirth:c,userId:i,staticUrl:Je,isMe:l,isSubscribedTo:r,isSubscriber:o}),this.postsElement=document.getElementById("posts"),this.lastPostId=0,this.isAllPosts=!1,this.isWaitPosts=!0;var d=document.getElementById("news-content__textarea");d&&d.addEventListener("input",(function(){d.style.height="auto",d.style.height=d.scrollHeight-4+"px"})),document.onscroll=this.checksNewPosts.bind(this);var p=document.getElementById("publish-post-button"),h=document.getElementById("news__file-input"),y=document.getElementById("news__file-button");y&&y.addEventListener("click",(function(){h.click()})),h&&h.addEventListener("change",(function(){var t=h.files,e=document.getElementById("news-img-content");e.innerHTML="",Array.from(t).forEach((function(t){var n=URL.createObjectURL(t),r=document.createElement("img");r.setAttribute("src",n),r.classList.add("news-img-content__img"),e.appendChild(r)}))})),null!==p&&p.addEventListener("click",(function(){var t=document.getElementById("news-content__textarea").value;if(""!==t.trim()||0!==h.files.length){e.eventBus.emit("clickedPublishPost",{content:t,attachments:h.files}),document.getElementById("news-img-content").innerHTML="";var n=document.getElementById("news-content__textarea");n.value="",n.style.height="60px",h.value=null}})),this.subscribeUser=document.getElementById("subscribe-".concat(this.userId)),this.sendMessageUser=document.getElementById("send-message-".concat(this.userId)),null!==this.subscribeUser&&this.subscribeUser.addEventListener("click",(function(){e.subscribeUser.classList.contains("subscribed-to-options__button-subscribe")?e.eventBus.emit("clickedSubscribe",e.userId):e.eventBus.emit("clickedUnsubscribe",e.userId)})),null!==this.sendMessageUser&&this.sendMessageUser.addEventListener("click",(function(){e.router.redirect("/chat/".concat(e.userId))})),this.eventBus.emit("readyRenderPosts",{userId:this.userId,lastPostId:this.lastPostId})}},{key:"updateSubscribed",value:function(){this.subscribeUser.classList.remove("subscribed-to-options__button-subscribe"),this.subscribeUser.classList.add("subscribed-to-options__button-unsubscribe"),this.isSubscriber?this.subscribeUser.innerHTML="Удалить из друзей":this.subscribeUser.innerHTML="Отписаться",this.sendMessageUser.classList.remove("subscribed-to-options__button-subscribe-message"),this.sendMessageUser.classList.add("subscribed-to-options__button-unsubscribe-message")}},{key:"updateUnsubscribed",value:function(){this.subscribeUser.classList.remove("subscribed-to-options__button-unsubscribe"),this.subscribeUser.classList.add("subscribed-to-options__button-subscribe"),this.isSubscriber?this.subscribeUser.innerHTML="Принять заявку в друзья":this.subscribeUser.innerHTML="Подписаться",this.sendMessageUser.classList.remove("subscribed-to-options__button-unsubscribe-message"),this.sendMessageUser.classList.add("subscribed-to-options__button-subscribe-message")}},{key:"renderPosts",value:function(t){var e=this,n=t.author,r=t.posts;this.isWaitPosts=!1,r?(r.forEach((function(t){(t.postId<e.lastPostId||0===e.lastPostId)&&(e.lastPostId=t.postId)})),r.forEach((function(t){e.postController.renderPostView({post:t,author:n})}))):(this.isAllPosts=!0,document.getElementById("no-more-posts").classList.replace("no-more-posts__hidden","no-more-posts__visible"))}},{key:"postPublishedSuccess",value:function(t){var e=t.post,n=t.author;this.postController.renderPostView({post:e,author:n,publish:!0})}},{key:"serverErrored",value:function(){document.getElementById("server-error-500").classList.remove("server-error-500")}}])&&De(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qe(r.key),r)}}function Qe(t){var e=function(t,e){if("object"!=Xe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xe(e)?e:e+""}var Ze=["receiveProfileData","receiveProfilePosts","receiveOwnProfileData","clickLogoutButton","readyRenderProfile","clickedSubscribe","clickedUnsubscribe","subscribedSuccess","unsubscribedSuccess","readyRenderPosts","getPostsSuccess","clickedPublishPost","clickedDeletePost","postDeleteSuccess","publishedPostSuccess","clickedUpdatePost","postUpdateSuccess","serverError"];const tn=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new Bt(Ze),this.profileModel=new $t(this.eventBus,e,n),this.profileView=new Ke(this.eventBus,e)},(e=[{key:"renderProfileView",value:function(t){var e=t.userId;this.profileView.renderProfileMain(e)}}])&&$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rn(r.key),r)}}function rn(t){var e=function(t,e){if("object"!=en(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=en(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==en(e)?e:e+""}function on(t,e,n){return e=sn(e),function(t,e){if(e&&("object"===en(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,an()?Reflect.construct(e,n||[],sn(t).constructor):e.apply(t,n))}function an(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(an=function(){return!!t})()}function sn(t){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sn(t)}function cn(t,e){return cn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cn(t,e)}var un="form__input__correct",ln=[{inscription:"Электронная почта",incorrect:"incorrect-email",incorrectText:it,type:"text",id:"email",name:"email",placeholder:"Электронная почта",isPassword:!1},{inscription:"Пароль",incorrect:"incorrect-password",incorrectText:ot,type:"password",id:"password",name:"password",placeholder:"Пароль",isPassword:!0}];const fn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=on(this,e,[t])).eventBus.addEventListener("receiveLoginResult",n.handleLoginResult.bind(n)),n.eventBus.addEventListener("serverError",n.handleServerError.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cn(t,e)}(e,t),n=e,(r=[{key:"render",value:function(t){var e=Handlebars.templates["login.hbs"];t.innerHTML=e({inputs:ln});var n=document.getElementById("email"),r=document.getElementById("password"),o=document.getElementById("incorrect-email"),i=document.getElementById("incorrect-password"),a=document.getElementById("login-show-password");n.addEventListener("focusout",(function(){o.classList.add(un),et(n.value)||o.classList.remove(un)})),r.addEventListener("focusout",(function(){i.classList.add(un),tt(r.value)||i.classList.remove(un)})),a.addEventListener("click",(function(){"password"==r.getAttribute("type")?r.setAttribute("type","text"):r.setAttribute("type","password")})),document.getElementById("button-sign-in").addEventListener("click",this.checkAndSubmitForm.bind(this))}},{key:"handleLoginResult",value:function(t){var e=document.getElementById("incorrect-form-login");t?(document.body.innerHTML="",this.eventBus.emit("loginSuccess","/feed")):e.classList.remove(un)}},{key:"handleServerError",value:function(){document.getElementById("server-error").classList.remove(un)}},{key:"checkAndSubmitForm",value:function(){var t=document.getElementById("email"),e=document.getElementById("password"),n=document.getElementById("incorrect-email"),r=document.getElementById("incorrect-password"),o=document.getElementById("incorrect-form-login");n.classList.add(un),r.classList.add(un);var i=!0;if(et(t.value)||(n.classList.remove(un),i=!1),tt(e.value)||(r.classList.remove(un),i=!1),i){o.classList.add(un);var a={email:t.value,password:e.value};this.eventBus.emit("attemptLogin",a)}}}])&&nn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function dn(t){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function pn(){pn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==dn(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(dn(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function hn(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vn(r.key),r)}}function vn(t){var e=function(t,e){if("object"!=dn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dn(e)?e:e+""}function mn(t,e,n){return e=gn(e),function(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bn()?Reflect.construct(e,n||[],gn(t).constructor):e.apply(t,n))}function bn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bn=function(){return!!t})()}function gn(t){return gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gn(t)}function wn(t,e){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wn(t,e)}const xn=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=mn(this,e,[t])).webSocket=n,r.eventBus.addEventListener("attemptLogin",r.checkAndSubmitForm.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(e,t),n=e,r=[{key:"checkAndSubmitForm",value:(o=pn().mark((function t(e){var n,r,o,i;return pn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.email,r=e.password,o=new g,t.next=4,o.login(n,r);case 4:i=t.sent,t.t0=i.status,t.next=200===t.t0?8:401===t.t0?19:21;break;case 8:return t.next=10,c.updateCSRFToken();case 10:return t.next=12,H.updateState();case 12:if(!t.sent){t.next=17;break}this.webSocket.openWebSocket(),this.eventBus.emit("receiveLoginResult",!0),t.next=18;break;case 17:this.eventBus.emit("receiveLoginResult",!1);case 18:return t.abrupt("break",22);case 19:return this.eventBus.emit("receiveLoginResult",!1),t.abrupt("break",22);case 21:this.eventBus.emit("serverError",{});case 22:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){hn(i,n,r,a,s,"next",t)}function s(t){hn(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],r&&yn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i}(C);function En(t){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ln(r.key),r)}}function Ln(t){var e=function(t,e){if("object"!=En(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==En(e)?e:e+""}function Sn(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function _n(t,e,n){return t.set(Pn(t,e),n),n}function Pn(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var jn=["attemptLogin","loginSuccess","receiveLoginResult","serverError"],On=new WeakMap,Bn=new WeakMap,In=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Sn(this,On,void 0),Sn(this,Bn,void 0),this.eventBus=new Bt(jn),_n(Bn,this,new xn(this.eventBus,n)),_n(On,this,new fn(this.eventBus)),this.eventBus.addEventListener("loginSuccess",e.redirect.bind(e))},(e=[{key:"renderLoginView",value:function(){var t;(t=On,this,t.get(Pn(t,this))).render(document.body)}}])&&kn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Tn(t){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(t)}function Nn(){Nn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Tn(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Tn(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Mn(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Fn(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Mn(i,r,o,a,s,"next",t)}function s(t){Mn(i,r,o,a,s,"throw",t)}a(void 0)}))}}function An(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cn(r.key),r)}}function Cn(t){var e=function(t,e){if("object"!=Tn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tn(e)?e:e+""}function Rn(t,e,n){return e=Gn(e),function(t,e){if(e&&("object"===Tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zn()?Reflect.construct(e,n||[],Gn(t).constructor):e.apply(t,n))}function zn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zn=function(){return!!t})()}function Gn(t){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gn(t)}function Un(t,e){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Un(t,e)}const Dn=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Rn(this,e,[t])).webSocket=r,o.friendsService=new k,o.subscribersService=new L,o.subscriptionsService=new S,o.authService=new g,o.profileService=new w,o.router=n,o.eventBus.addEventListener("readyRenderFriends",o.getFriends.bind(o)),o.eventBus.addEventListener("readyRenderSubscribers",o.getSubscribers.bind(o)),o.eventBus.addEventListener("readyRenderSubscriptions",o.getSubscriptions.bind(o)),o.eventBus.addEventListener("clickedSubscribeButton",o.addFriend.bind(o)),o.eventBus.addEventListener("clickedUnsubscribeButton",o.deleteSubscribe.bind(o)),o.eventBus.addEventListener("clickedLogoutButton",o.logout.bind(o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Un(t,e)}(e,t),n=e,r=[{key:"getFriends",value:(u=Fn(Nn().mark((function t(){var e;return Nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.friendsService.getFriends();case 2:e=t.sent,t.t0=e.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("friendsGetSuccess",e.body.friends),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getSubscribers",value:(c=Fn(Nn().mark((function t(){var e;return Nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscribersService.getSubscribers();case 2:e=t.sent,t.t0=e.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("subscribersGetSuccess",e.body.subscribers),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getSubscriptions",value:(s=Fn(Nn().mark((function t(){var e;return Nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriptionsService.getSubscriptions();case 2:e=t.sent,t.t0=e.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("subscriptionsGetSuccess",e.body.subscriptions),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"addFriend",value:(a=Fn(Nn().mark((function t(e){var n;return Nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriptionsService.postSubscription(e);case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("addFriendSuccess",e),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"deleteSubscribe",value:(i=Fn(Nn().mark((function t(e){var n;return Nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriptionsService.deleteSubscription(e);case 2:n=t.sent,t.t0=n.status,t.next=204===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("unsubscribeSuccess",e),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"logout",value:(o=Fn(Nn().mark((function t(){var e;return Nn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.logout();case 2:e=t.sent,t.t0=e.status,t.next=200===t.t0||401===t.t0?6:8;break;case 6:return this.router.redirect("/login"),t.abrupt("break",9);case 8:this.eventBus.emit("serverError",{});case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&An(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a,s,c,u}(C);function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vn(r.key),r)}}function Vn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hn(e)?e:e+""}function Yn(t,e,n){return e=Jn(e),function(t,e){if(e&&("object"===Hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qn()?Reflect.construct(e,n||[],Jn(t).constructor):e.apply(t,n))}function qn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qn=function(){return!!t})()}function Jn(t){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jn(t)}function Kn(t,e){return Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kn(t,e)}var Xn="".concat(t,"/static"),$n=[{href:"/friends",id:"friends-label",text:"ДРУЗЬЯ"},{href:"/subscribers",id:"subscribers-label",text:"ПОДПИСЧИКИ"},{href:"/subscriptions",id:"subscriptions-label",text:"ПОДПИСКИ"}];const Qn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yn(this,e,[t])).template=Handlebars.templates["friendsMain.hbs"],n.eventBus.addEventListener("receiveOwnProfileData",n.renderMain.bind(n)),n.eventBus.addEventListener("friendsGetSuccess",n.renderFriends.bind(n)),n.eventBus.addEventListener("subscribersGetSuccess",n.renderSubscribers.bind(n)),n.eventBus.addEventListener("subscriptionsGetSuccess",n.renderSubscriptions.bind(n)),n.eventBus.addEventListener("addFriendSuccess",n.deleteSubscribe.bind(n)),n.eventBus.addEventListener("unsubscribeSuccess",n.deleteSubscribe.bind(n)),n.eventBus.addEventListener("serverError",n.serverErrored.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kn(t,e)}(e,t),n=e,(r=[{key:"renderMain",value:function(t){var e=this,n=H.userId,r=H.avatar,o=H.firstName,i=H.lastName;switch(new ce(document.body).renderForm({userId:n,avatar:r,firstName:o,lastName:i}),new ye(document.body).renderForm(n),document.getElementById("logout-button").addEventListener("click",(function(){e.eventBus.emit("clickedLogoutButton",{})})),this.mainElem=document.getElementById("activity"),t){case"subscriptions":this.eventBus.emit("readyRenderSubscriptions",{});break;case"subscribers":this.eventBus.emit("readyRenderSubscribers",{});break;default:this.eventBus.emit("readyRenderFriends",{})}}},{key:"renderFriends",value:function(t){var e=this,n=null==t;n||t.forEach((function(t){t.dateOfBirth=Zt(t.dateOfBirth)})),this.mainElem.innerHTML=this.template({staticUrl:Xn,friends:t,rightSidebar:$n,isFriends:!0,noFriends:n});var r=document.getElementById("friends-label");r.classList.remove("right-sidebar__a-common"),r.classList.add("right-sidebar__a-bigger"),document.querySelectorAll(".friend-ables__delete-friend-button").forEach((function(t){t.addEventListener("click",(function(){var n=t.dataset.id;e.eventBus.emit("clickedUnsubscribeButton",n)}))}))}},{key:"renderSubscribers",value:function(t){var e=this,n=null==t;n||t.forEach((function(t){t.dateOfBirth=Zt(t.dateOfBirth)})),this.mainElem.innerHTML=this.template({staticUrl:Xn,friends:t,rightSidebar:$n,isSubscribers:!0,noFriends:n});var r=document.getElementById("subscribers-label");r.classList.remove("right-sidebar__a-common"),r.classList.add("right-sidebar__a-bigger"),document.querySelectorAll(".friend-ables__add-friend-button").forEach((function(t){t.addEventListener("click",(function(){var n=t.dataset.id;e.eventBus.emit("clickedSubscribeButton",n)}))}))}},{key:"deleteSubscribe",value:function(t){document.getElementById("friends-field-".concat(t)).remove()}},{key:"renderSubscriptions",value:function(t){var e=this,n=null==t;n||t.forEach((function(t){t.dateOfBirth=Zt(t.dateOfBirth)})),this.mainElem.innerHTML=this.template({staticUrl:Xn,friends:t,rightSidebar:$n,isSubscriptions:!0,noFriends:n});var r=document.getElementById("subscriptions-label");r.classList.remove("right-sidebar__a-common"),r.classList.add("right-sidebar__a-bigger"),document.querySelectorAll(".friend-ables__unsubscribe-button").forEach((function(t){t.addEventListener("click",(function(){var n=t.dataset.id;e.eventBus.emit("clickedUnsubscribeButton",n)}))}))}},{key:"serverErrored",value:function(){document.getElementById("server-error-500").classList.remove("server-error-500")}}])&&Wn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function Zn(t){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(t)}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,er(r.key),r)}}function er(t){var e=function(t,e){if("object"!=Zn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zn(e)?e:e+""}var nr=["readyRenderFriends","readyRenderSubscribers","readyRenderSubscriptions","receiveOwnProfileData","friendsGetSuccess","subscribersGetSuccess","subscriptionsGetSuccess","clickedLogoutButton","clickedSubscribeButton","addFriendSuccess","unsubscribeSuccess","clickedUnsubscribeButton","serverError"];const rr=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new Bt(nr),this.friendsModel=new Dn(this.eventBus,e,n),this.friendsView=new Qn(this.eventBus)},(e=[{key:"renderView",value:function(t){var e=t.section;this.friendsView.renderMain(e)}}])&&tr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function or(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Неизвестная ошибка",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.createElement("div");switch(t){case"warning":r.classList.add("custom-alert","custom-alert-warning");break;case"success":r.classList.add("custom-alert","custom-alert-success");break;default:r.classList.add("custom-alert","custom-alert-error")}r.innerHTML=e,document.body.appendChild(r),n||setTimeout((function(){r.remove()}),2e3)}function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function ar(){ar=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ir(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(ir(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function sr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function cr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){sr(i,r,o,a,s,"next",t)}function s(t){sr(i,r,o,a,s,"throw",t)}a(void 0)}))}}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lr(r.key),r)}}function lr(t){var e=function(t,e){if("object"!=ir(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ir(e)?e:e+""}function fr(t,e,n){return e=pr(e),function(t,e){if(e&&("object"===ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dr()?Reflect.construct(e,n||[],pr(t).constructor):e.apply(t,n))}function dr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dr=function(){return!!t})()}function pr(t){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pr(t)}function hr(t,e){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hr(t,e)}const yr=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=fr(this,e,[t])).router=n,o.webSocket=r,o.chatService=new E,o.authService=new g,o.profileService=new w,o.eventBus.addEventListener("needUpgradeWebSocket",o.updateWebSocket.bind(o)),o.eventBus.addEventListener("needGetProfile",o.getProfileData.bind(o)),o.eventBus.addEventListener("readyRenderDialogs",o.getDialogs.bind(o)),o.eventBus.addEventListener("clickedLogoutButton",o.logout.bind(o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hr(t,e)}(e,t),n=e,r=[{key:"updateWebSocket",value:function(){var t=this;this.webSocket.addEventOnMessage("messengerMessage",(function(e){var n=JSON.parse(e.data);switch(n.type){case"SEND_MESSAGE":t.eventBus.emit("sendMessageSuccess",n.payload);break;case"UPDATE_MESSAGE":t.eventBus.emit("updateLastMessage",n.payload);break;case"DELETE_MESSAGE":or("error");break;default:t.eventBus.emit("serverError",{})}})),this.webSocket.addEventOnError("messageError",(function(){or()})),this.webSocket.addEventOnClose("messageClose",(function(){t.eventBus.emit("serverError",{})})),this.eventBus.emit("updatedWebSocket",{})}},{key:"getProfileData",value:(a=cr(ar().mark((function t(e){var n;return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.profileService.getOtherProfileData(e);case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("receiveProfileData",n.body),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:or();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"getDialogs",value:(i=cr(ar().mark((function t(){var e;return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.chatService.getDialogs();case 2:e=t.sent,t.t0=e.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("getDialogsSuccess",e.body),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"logout",value:(o=cr(ar().mark((function t(){var e;return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.logout();case 2:e=t.sent,t.t0=e.status,t.next=200===t.t0||401===t.t0?6:8;break;case 6:return this.router.redirect("/login"),t.abrupt("break",9);case 8:this.eventBus.emit("serverError",{});case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&ur(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(C);function vr(t){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(t)}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,br(r.key),r)}}function br(t){var e=function(t,e){if("object"!=vr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vr(e)?e:e+""}function gr(t,e,n){return e=xr(e),function(t,e){if(e&&("object"===vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wr()?Reflect.construct(e,n||[],xr(t).constructor):e.apply(t,n))}function wr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wr=function(){return!!t})()}function xr(t){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xr(t)}function Er(t,e){return Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Er(t,e)}var kr="".concat(t,"/static");const Lr=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gr(this,e,[t])).router=n,r.promissedMessages=new Map,r.eventBus.addEventListener("updatedWebSocket",r.updatedWebSocket.bind(r)),r.eventBus.addEventListener("sendMessageSuccess",r.sendedMessage.bind(r)),r.eventBus.addEventListener("updateLastMessage",r.updatedMessage.bind(r)),r.eventBus.addEventListener("receiveProfileData",r.addDialog.bind(r)),r.eventBus.addEventListener("getDialogsSuccess",r.renderDialogs.bind(r)),r.eventBus.addEventListener("serverError",r.serverErrored.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Er(t,e)}(e,t),n=e,(r=[{key:"renderMain",value:function(){var t=this,e=H.userId,n=H.avatar,r=H.firstName,o=H.lastName;new ce(document.body).renderForm({userId:e,avatar:n,firstName:r,lastName:o}),new ye(document.body).renderForm(e),document.getElementById("logout-button").addEventListener("click",(function(){t.eventBus.emit("clickedLogoutButton",{})})),this.mainElement=document.getElementById("activity"),this.mainElement.innerHTML=Handlebars.templates["messengerMain.hbs"]({noDialogs:!0}),this.dialogsElement=document.getElementById("dialogs"),this.eventBus.emit("needUpgradeWebSocket",{})}},{key:"updatedWebSocket",value:function(){this.eventBus.emit("readyRenderDialogs",{})}},{key:"sendedMessage",value:function(t){if("/messenger"===window.location.pathname)if(t.senderId===H.userId)document.getElementById("dialog-".concat(t.receiverId))?(document.getElementById("chatter-info__message-span-".concat(t.receiverId)).innerHTML=t.content,document.getElementById("chatter-content__time-span-".concat(t.receiverId)).innerHTML=ee(t.createdAt)):(this.promissedMessages.set(t.receiverId,{content:t.content,createdAt:ee(t.createdAt),id:t.id}),this.eventBus.emit("needGetProfile",t.receiverId));else if(document.getElementById("dialog-".concat(t.senderId))){var e=document.querySelector("#dialog-".concat(t.senderId," .chatter-content__message-span"));e.innerHTML=t.content,e.setAttribute("id","chatter-content__message-span-".concat(t.senderId,"-").concat(t.id));var n=document.querySelector("#dialog-".concat(t.senderId," .chatter-content__time-span"));n.innerHTML=ee(t.createdAt),n.setAttribute("id","chatter-content__time-span-".concat(t.senderId,"-").concat(t.id))}else this.promissedMessages.set(t.senderId,{content:t.content,createdAt:ee(t.createdAt),id:t.id}),this.eventBus.emit("needGetProfile",t.senderId)}},{key:"updatedMessage",value:function(t){"/messenger"===window.location.pathname&&(t.senderId===H.userId?document.getElementById("dialog-".concat(t.receiverId))&&(document.getElementById("chatter-info__message-span-".concat(t.receiverId)).innerHTML=t.content):document.getElementById("dialog-".concat(t.senderId))&&(document.getElementById("chatter-content__message-span-".concat(t.senderId,"-").concat(t.id)).innerHTML=t.content))}},{key:"addDialog",value:function(t){var e=this,n=this.promissedMessages.get(t.User.userId);this.promissedMessages.delete(t.User.userId),this.dialogsElement.innerHTML+=Handlebars.templates["messenge.hbs"]({staticUrl:kr,elem:{companion:t.User,lastMessage:n}}),document.querySelectorAll(".dialog").forEach((function(t){t.addEventListener("click",(function(){e.router.redirect("/chat/".concat(t.dataset.id))}))}))}},{key:"renderDialogs",value:function(t){var e=this,n=Handlebars.templates["messenge.hbs"],r=document.getElementById("no-dialogs__span");t.forEach((function(t){t.user1.userId===H.userId?t.companion=t.user2:t.companion=t.user1,t.lastMessage.createdAt=ee(t.lastMessage.createdAt),e.dialogsElement.innerHTML+=n({staticUrl:kr,elem:t}),null==r||r.remove()})),document.querySelectorAll(".dialog").forEach((function(t){t.addEventListener("click",(function(){e.router.redirect("/chat/".concat(t.dataset.id))}))}))}},{key:"serverErrored",value:function(){var t=document.getElementById("server-error-500");null==t||t.classList.remove("server-error-500")}}])&&mr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function Sr(t){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(t)}function _r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pr(r.key),r)}}function Pr(t){var e=function(t,e){if("object"!=Sr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sr(e)?e:e+""}var jr=["needUpgradeWebSocket","sendMessageSuccess","needGetProfile","receiveProfileData","updateLastMessage","updatedWebSocket","readyRenderDialogs","getDialogsSuccess","clickedLogoutButton","serverError"];const Or=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new Bt(jr),this.messengerModel=new yr(this.eventBus,e,n),this.messengerView=new Lr(this.eventBus,e)},(e=[{key:"renderMessengerView",value:function(){this.messengerView.renderMain()}}])&&_r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Br(t){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(t)}function Ir(){Ir=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Br(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Br(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Tr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Nr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Tr(i,r,o,a,s,"next",t)}function s(t){Tr(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fr(r.key),r)}}function Fr(t){var e=function(t,e){if("object"!=Br(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Br(e)?e:e+""}function Ar(t,e,n){return e=Rr(e),function(t,e){if(e&&("object"===Br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cr()?Reflect.construct(e,n||[],Rr(t).constructor):e.apply(t,n))}function Cr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cr=function(){return!!t})()}function Rr(t){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(t)}function zr(t,e){return zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zr(t,e)}const Gr=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Ar(this,e,[t])).router=n,o.webSocket=r,o.chatService=new E,o.profileService=new w,o.authService=new g,o.eventBus.addEventListener("readyRenderCompanion",o.getCompanion.bind(o)),o.eventBus.addEventListener("needUpdateWebSocket",o.updateWebSocket.bind(o)),o.eventBus.addEventListener("readyRenderMessages",o.getMessages.bind(o)),o.eventBus.addEventListener("clickedSendMessage",o.sendMessage.bind(o)),o.eventBus.addEventListener("clickedDeleteMessage",o.deleteMessage.bind(o)),o.eventBus.addEventListener("clickedUpdateMessage",o.updateMessage.bind(o)),o.eventBus.addEventListener("clickLogoutButton",o.logout.bind(o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zr(t,e)}(e,t),n=e,r=[{key:"getCompanion",value:(u=Nr(Ir().mark((function t(e){var n;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.profileService.getOtherProfileData(e);case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("receiveCompanionData",n.body),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"updateWebSocket",value:function(){var t=this;this.webSocket.addEventOnMessage("dialogMessage",(function(e){var n=JSON.parse(e.data);switch(n.type){case"SEND_MESSAGE":t.eventBus.emit("sendMessageSuccess",n.payload);break;case"UPDATE_MESSAGE":t.eventBus.emit("updateMessageSuccess",n.payload);break;case"DELETE_MESSAGE":t.eventBus.emit("deleteMessageSuccess",n.payload);break;default:t.eventBus.emit("serverError",{})}})),this.webSocket.addEventOnError("messageError",(function(){t.eventBus.emit("serverError",{})})),this.webSocket.addEventOnClose("messageClose",(function(){t.eventBus.emit("serverError",{})})),this.eventBus.emit("updatedWebSocket",{})}},{key:"getMessages",value:(c=Nr(Ir().mark((function t(e){var n,r,o;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.companionId,r=e.lastMessageId,t.next=3,this.chatService.getMessages(n,r);case 3:o=t.sent,t.t0=o.status,t.next=200===t.t0?7:401===t.t0?9:11;break;case 7:return this.eventBus.emit("getMessagesSuccess",o.body),t.abrupt("break",12);case 9:return this.router.redirect("/login"),t.abrupt("break",12);case 11:this.eventBus.emit("serverError",{});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"sendMessage",value:(s=Nr(Ir().mark((function t(e){var n,r;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.companionId,r=e.textContent,this.webSocket.sendMessage(n,r);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"updateMessage",value:(a=Nr(Ir().mark((function t(e){var n,r,o;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.messageId,r=e.textContent,o=e.receiver,this.webSocket.updateMessage(n,r,o);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"deleteMessage",value:(i=Nr(Ir().mark((function t(e){var n,r;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.messageId,r=e.receiver,this.webSocket.deleteMessage(n,r);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"logout",value:(o=Nr(Ir().mark((function t(){var e;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.logout();case 2:e=t.sent,t.t0=e.status,t.next=200===t.t0||401===t.t0?6:8;break;case 6:return this.router.redirect("/login"),t.abrupt("break",9);case 8:this.eventBus.emit("serverError",{});case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&Mr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a,s,c,u}(C);function Ur(t){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ur(t)}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hr(r.key),r)}}function Hr(t){var e=function(t,e){if("object"!=Ur(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ur(e)?e:e+""}function Wr(t,e,n){return e=Yr(e),function(t,e){if(e&&("object"===Ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vr()?Reflect.construct(e,n||[],Yr(t).constructor):e.apply(t,n))}function Vr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vr=function(){return!!t})()}function Yr(t){return Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yr(t)}function qr(t,e){return qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qr(t,e)}var Jr="".concat(t,"/static");const Kr=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Wr(this,e,[t])).router=n,r.eventBus.addEventListener("receiveCompanionData",r.renderCompanion.bind(r)),r.eventBus.addEventListener("updatedWebSocket",r.updatedWebSocket.bind(r)),r.eventBus.addEventListener("getMessagesSuccess",r.renderMessages.bind(r)),r.eventBus.addEventListener("sendMessageSuccess",r.renderAddMessage.bind(r)),r.eventBus.addEventListener("deleteMessageSuccess",r.renderDeleteMessage.bind(r)),r.eventBus.addEventListener("updateMessageSuccess",r.renderUpdateMessage.bind(r)),r.eventBus.addEventListener("serverError",r.serverErrored.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qr(t,e)}(e,t),n=e,(r=[{key:"renderMain",value:function(t){var e=this;this.companionId=+t;var n=H.userId,r=H.avatar,o=H.firstName,i=H.lastName;new ce(document.body).renderForm({userId:n,avatar:r,firstName:o,lastName:i}),new ye(document.body).renderForm(n),this.mainElement=document.getElementById("activity"),this.lastMessageId=0,this.isAllMessages=!1,document.getElementById("logout-button").addEventListener("click",(function(){e.chatElement.removeEventListener("scroll",e.checksNewMessages.bind(e)),e.eventBus.emit("clickLogoutButton",{})})),document.onkeydown=function(t){"Escape"===t.key&&e.router.redirect("/messenger")},this.eventBus.emit("readyRenderCompanion",this.companionId)}},{key:"checksNewMessages",value:function(){!this.isAllMessages&&!this.isWaitMessages&&this.chatElement.scrollHeight+this.chatElement.scrollTop<=550&&(this.eventBus.emit("readyRenderMessages",{companionId:this.companionId,lastMessageId:this.lastMessageId}),this.isWaitMessages=!0)}},{key:"renderCompanion",value:function(t){var e=this,n=t.User,r=n.userId,o=n.avatar,i=n.firstName,a=n.lastName,s=Handlebars.templates["chatMain.hbs"];this.mainElement.innerHTML=s({userId:r,avatar:o,firstName:i,lastName:a,staticUrl:Jr}),this.chatElement=document.getElementById("messages");var c=document.getElementById("print-message__text-input");document.getElementById("message-menu__send-button").addEventListener("click",(function(){""!==c.value&&(e.chatElement.scrollTop=0,e.eventBus.emit("clickedSendMessage",{companionId:e.companionId,textContent:c.value}),c.value="",c.focus())}));var u=document.getElementById("print-message"),l=document.getElementById("print-message__text-input");l.addEventListener("input",(function(){l.style.height="auto",l.style.height=l.scrollHeight-4+"px",u.style.height="auto",u.style.height=u.scrollHeight-4+"px"})),this.chatElement.addEventListener("scroll",this.checksNewMessages.bind(this)),this.eventBus.emit("needUpdateWebSocket",this.companionId)}},{key:"updatedWebSocket",value:function(){this.eventBus.emit("readyRenderMessages",{companionId:this.companionId,lastMessageId:0})}},{key:"renderMessages",value:function(t){var e=this;this.isWaitMessages=!1;var n=Handlebars.templates["message.hbs"],r=0===t.length;r&&(this.isAllMessages=!0),t.forEach((function(t){""!==t.content.trim()||t.attachments?(t.isMe=t.senderId===H.userId,t.isUpdated=t.createdAt!==t.updatedAt,t.createdAt=ee(t.createdAt),(t.id<e.lastMessageId||0===e.lastMessageId)&&(e.lastMessageId=t.id)):e.eventBus.emit("clickedDeleteMessage",{messageId:t.id,receiver:e.companionId})})),this.chatElement.innerHTML+=n({messages:t,noMessages:r});var o=document.querySelectorAll(".message__trash-basket-img"),i=document.querySelectorAll(".message__edit-img");o.forEach((function(t){t.addEventListener("click",(function(){e.eventBus.emit("clickedDeleteMessage",{messageId:t.dataset.id,receiver:e.companionId})}))})),i.forEach((function(t){e.acceptUpdateListener(t)}))}},{key:"renderAddMessage",value:function(t){var e=this;if(window.location.pathname==="/chat/".concat(this.companionId)&&(t.senderId===+this.companionId||t.receiverId===+this.companionId)){var n=Handlebars.templates["message.hbs"],r=[t];t.isMe=t.senderId===H.userId,t.createdAt=ee(t.createdAt),this.chatElement.innerHTML=n({messages:r})+this.chatElement.innerHTML;var o=document.getElementById("messages__start-dialog-span");o&&o.remove();var i=document.querySelectorAll(".message__trash-basket-img"),a=document.querySelectorAll(".message__edit-img");i.forEach((function(t){t.addEventListener("click",(function(){e.eventBus.emit("clickedDeleteMessage",{messageId:t.dataset.id,receiver:e.companionId})}))})),a.forEach((function(t){e.acceptUpdateListener(t)}))}}},{key:"acceptUpdateListener",value:function(t){var e=this;t.addEventListener("click",(function(){var n=document.getElementById("print-message__text-input"),r=document.getElementById("message-menu__send-button"),o=t.dataset.id,i=document.getElementById("message-content-".concat(o)),a=document.createElement("img"),s=r.parentElement;Array.from(document.getElementsByClassName("message-menu__accept-img")).forEach((function(t){t.remove()})),a.setAttribute("src","../static/images/check.png"),a.setAttribute("data-id",o),a.classList.add("message-menu__accept-img"),a.addEventListener("click",(function(){n.value!==i.innerHTML&&""!==n.value.trim()&&(e.eventBus.emit("clickedUpdateMessage",{messageId:o,textContent:n.value,receiver:e.companionId}),n.focus()),r.style.display="block",a.remove(),n.value=""})),n.value=i.innerHTML,r.style.display="none",s.insertBefore(a,r)}))}},{key:"renderUpdateMessage",value:function(t){if(window.location.pathname==="/chat/".concat(this.companionId)&&(document.getElementById("message-content-".concat(t.id)).innerHTML=t.content,!document.getElementById("message-edited-".concat(t.id)))){var e=document.createElement("span");e.classList.add("message-time-edited__span-edited"),e.setAttribute("id","message-edited-".concat(t.id)),e.innerHTML="ред.",document.getElementById("message-time-edited-".concat(t.id)).appendChild(e)}}},{key:"renderDeleteMessage",value:function(t){if(window.location.pathname==="/chat/".concat(this.companionId)){var e=document.getElementById("message-".concat(t.messageId));e&&e.parentElement.remove()}}},{key:"serverErrored",value:function(){document.getElementById("server-error-500").classList.remove("server-error-500")}}])&&Dr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function Xr(t){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(t)}function $r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qr(r.key),r)}}function Qr(t){var e=function(t,e){if("object"!=Xr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xr(e)?e:e+""}var Zr=["readyRenderCompanion","receiveCompanionData","readyRenderMessages","getMessagesSuccess","needUpdateWebSocket","updatedWebSocket","clickedSendMessage","clickedDeleteMessage","clickedUpdateMessage","clickLogoutButton","sendMessageSuccess","updateMessageSuccess","deleteMessageSuccess","serverError"];const to=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new Bt(Zr),this.chatModel=new Gr(this.eventBus,e,n),this.chatView=new Kr(this.eventBus,e)},(e=[{key:"renderChatView",value:function(t){var e=t.companionId;this.chatView.renderMain(e)}}])&&$r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function eo(t){return eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eo(t)}function no(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ro(r.key),r)}}function ro(t){var e=function(t,e){if("object"!=eo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=eo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eo(e)?e:e+""}const oo=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.messageEvents={},this.errorsEvents={},this.closingEvents={}},(e=[{key:"openWebSocket",value:function(){(!this.ws||this.ws.readyState!==WebSocket.OPEN&&this.ws.readyState!==WebSocket.CONNECTING)&&(this.ws=new WebSocket(this.url))}},{key:"closeWebSocket",value:function(){this.ws&&this.ws.readyState!==WebSocket.CLOSED&&this.ws.readyState!==WebSocket.CLOSING&&this.ws.close(1e3)}},{key:"sendMessage",value:function(t,e){c.addCSRFTokenWebSocket(this.ws,{type:"SEND_MESSAGE",receiver:+t,payload:{content:e}})}},{key:"updateMessage",value:function(t,e,n){c.addCSRFTokenWebSocket(this.ws,{type:"UPDATE_MESSAGE",receiver:+n,payload:{messageId:+t,content:e}})}},{key:"deleteMessage",value:function(t,e){c.addCSRFTokenWebSocket(this.ws,{type:"DELETE_MESSAGE",receiver:+e,payload:{messageId:+t}})}},{key:"addEventOnMessage",value:function(t,e){this.messageEvents[t]||(this.messageEvents[t]=!0,this.ws.addEventListener("message",(function(t){return e(t)})))}},{key:"addEventOnClose",value:function(t,e){this.closingEvents[t]||(this.closingEvents[t]=!0,this.ws.addEventListener("close",(function(t){return e(t)})))}},{key:"addEventOnError",value:function(t,e){this.errorsEvents[t]||(this.errorsEvents[t]=!0,this.ws.addEventListener("error",(function(t){return e(t)})))}}])&&no(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function io(t){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(t)}function ao(){ao=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==io(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(io(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function so(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function co(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){so(i,r,o,a,s,"next",t)}function s(t){so(i,r,o,a,s,"throw",t)}a(void 0)}))}}function uo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lo(r.key),r)}}function lo(t){var e=function(t,e){if("object"!=io(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==io(e)?e:e+""}function fo(t,e,n){return e=ho(e),function(t,e){if(e&&("object"===io(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,po()?Reflect.construct(e,n||[],ho(t).constructor):e.apply(t,n))}function po(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(po=function(){return!!t})()}function ho(t){return ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ho(t)}function yo(t,e){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yo(t,e)}const vo=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=fo(this,e,[t])).router=n,o.webSocket=r,o.postService=new x,o.eventBus.addEventListener("readyRenderPosts",o.getFriendPosts.bind(o)),o.eventBus.addEventListener("clickedPublishPost",o.publishPost.bind(o)),o.eventBus.addEventListener("clickLogoutButton",o.logout.bind(o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yo(t,e)}(e,t),n=e,r=[{key:"getFriendPosts",value:(a=co(ao().mark((function t(e){var n;return ao().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.postService.getFriendsPosts(e);case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:401===t.t0?8:10;break;case 6:return this.eventBus.emit("getPostsSuccess",n.body),t.abrupt("break",11);case 8:return this.router.redirect("/login"),t.abrupt("break",11);case 10:this.eventBus.emit("serverError",{});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"publishPost",value:(i=co(ao().mark((function t(e){var n,r,o;return ao().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.content,r=e.attachments,t.next=3,this.postService.publishPost(n,r);case 3:o=t.sent,t.t0=o.status,t.next=201===t.t0?7:401===t.t0?9:11;break;case 7:return this.eventBus.emit("publishedPostSuccess",o.body),t.abrupt("break",12);case 9:return this.router.redirect("/login"),t.abrupt("break",12);case 11:this.eventBus.emit("serverError",{});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"logout",value:(o=co(ao().mark((function t(){var e,n;return ao().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new g,t.next=3,e.logout();case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0||401===t.t0?7:9;break;case 7:return this.router.redirect("/login"),t.abrupt("break",10);case 9:this.eventBus.emit("serverError",{});case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&uo(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(C);function mo(t){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mo(t)}function bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,go(r.key),r)}}function go(t){var e=function(t,e){if("object"!=mo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=mo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mo(e)?e:e+""}function wo(t,e,n){return e=Eo(e),function(t,e){if(e&&("object"===mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xo()?Reflect.construct(e,n||[],Eo(t).constructor):e.apply(t,n))}function xo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xo=function(){return!!t})()}function Eo(t){return Eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eo(t)}function ko(t,e){return ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ko(t,e)}var Lo="".concat(t,"/static"),So=[{href:"/nothing",text:"НОВОСТИ"},{href:"/nothing",text:"СООБЩЕСТВА"},{href:"/nothing",text:"ДРУЗЬЯ"},{href:"/nothing",text:"ФОТОГРАФИИ"}];const _o=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wo(this,e,[t])).router=n,r.postController=new Ge(n),r.eventBus.addEventListener("getPostsSuccess",r.renderPosts.bind(r)),r.eventBus.addEventListener("publishedPostSuccess",r.renderPublishedSuccess.bind(r)),r.eventBus.addEventListener("serverError",r.serverErrored.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}(e,t),n=e,(r=[{key:"checksNewPosts",value:function(){document.body.scrollHeight-window.scrollY<=1500&&!this.isAllPosts&&!this.isWaitPosts&&(this.eventBus.emit("readyRenderPosts",this.lastPostId),this.isWaitPosts=!0)}},{key:"renderFeedMain",value:function(){var t=this,e=H.userId,n=H.avatar,r=H.firstName,o=H.lastName,i=Handlebars.templates["feedMain.hbs"],a="".concat(Lo,"/").concat(n);new ce(document.body).renderForm({userId:e,avatar:n,firstName:r,lastName:o}),new ye(document.body).renderForm(e),this.mainElement=document.getElementById("activity"),this.mainElement.innerHTML=i({userId:e,userAvatar:a,rightSidebar:So}),this.lastPostId=0,this.isAllPosts=!1,this.isWaitPosts=!0,document.getElementById("logout-button").addEventListener("click",(function(){t.eventBus.emit("clickLogoutButton",{})}));var s=document.getElementById("news-content__textarea");s.addEventListener("input",(function(){s.style.height="auto",s.style.height=s.scrollHeight-4+"px"})),document.onscroll=this.checksNewPosts.bind(this);var c=document.getElementById("publish-post-button"),u=document.getElementById("news__file-input"),l=document.getElementById("news__file-button");l&&l.addEventListener("click",(function(){u.click()})),u&&u.addEventListener("change",(function(){var t=u.files,e=document.getElementById("news-img-content");e.innerHTML="",Array.from(t).forEach((function(t){var n=URL.createObjectURL(t),r=document.createElement("img");r.setAttribute("src",n),r.classList.add("news-img-content__img"),e.appendChild(r)}))})),null!==c&&c.addEventListener("click",(function(){var e=document.getElementById("news-content__textarea").value;if(""!==e||0!==u.files.length){t.eventBus.emit("clickedPublishPost",{content:e,attachments:u.files}),document.getElementById("news-img-content").innerHTML="";var n=document.getElementById("news-content__textarea");n.value="",n.style.height="60px",u.files=null}})),this.postsElement=document.getElementById("posts"),this.eventBus.emit("readyRenderPosts",this.lastPostId)}},{key:"renderPosts",value:function(t){var e=this;this.isWaitPosts=!1,t?(t.forEach((function(t){(t.post.postId<e.lastPostId||0===e.lastPostId)&&(e.lastPostId=t.post.postId)})),t.forEach((function(t){e.postController.renderPostView(t)}))):(this.isAllPosts=!0,document.getElementById("no-more-posts").classList.replace("no-more-posts__hidden","no-more-posts__visible"))}},{key:"renderPublishedSuccess",value:function(t){var e=t.post,n=t.author;this.postController.renderPostView({post:e,author:n,publish:!0})}},{key:"deleteScrollListener",value:function(){document.removeEventListener("scroll",this.checksNewPosts.bind(this))}},{key:"serverErrored",value:function(){document.getElementById("server-error-500").classList.remove("server-error-500")}}])&&bo(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function Po(t){return Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Po(t)}function jo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oo(r.key),r)}}function Oo(t){var e=function(t,e){if("object"!=Po(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Po(e)?e:e+""}var Bo=["readyRenderPosts","clickLogoutButton","getPostsSuccess","clickedPublishPost","publishedPostSuccess","serverError"];const Io=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new Bt(Bo),this.feedModel=new vo(this.eventBus,e,n),this.feedView=new _o(this.eventBus,e)},(e=[{key:"renderFeed",value:function(){this.feedView.renderFeedMain()}},{key:"deleteScrollListener",value:function(){}}])&&jo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function To(t){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},To(t)}function No(){No=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==To(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(To(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function Mo(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Fo(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Mo(i,r,o,a,s,"next",t)}function s(t){Mo(i,r,o,a,s,"throw",t)}a(void 0)}))}}function Ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Co(r.key),r)}}function Co(t){var e=function(t,e){if("object"!=To(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=To(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==To(e)?e:e+""}function Ro(t,e,n){return e=Go(e),function(t,e){if(e&&("object"===To(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zo()?Reflect.construct(e,n||[],Go(t).constructor):e.apply(t,n))}function zo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zo=function(){return!!t})()}function Go(t){return Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Go(t)}function Uo(t,e){return Uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uo(t,e)}const Do=function(t){function e(t,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Ro(this,e,[t])).webSocket=r,o.router=n,o.profileService=new w,o.eventBus.addEventListener("clickedSaveChanges",o.saveChanges.bind(o)),o.eventBus.addEventListener("clickedDeleteProfile",o.deleteProfile.bind(o)),o.eventBus.addEventListener("clickedLogoutButton",o.logout.bind(o)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uo(t,e)}(e,t),n=e,r=[{key:"saveChanges",value:(a=Fo(No().mark((function t(e){var n,r,o,i,a,s,c;return No().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.firstName,r=e.lastName,o=e.email,i=e.password,a=e.repeatPassword,s=e.avatar,t.next=3,this.profileService.updateProfileData(n,r,o,i,a,s);case 3:c=t.sent,t.t0=c.status,t.next=200===t.t0?7:400===t.t0?14:401===t.t0?16:18;break;case 7:return H.avatar=c.body.avatar,H.firstName=c.body.firstName,H.lastName=c.body.lastName,H.updatedAt=c.body.updatedAt,H.email=c.body.email,this.eventBus.emit("changesSaved",{}),t.abrupt("break",19);case 14:return this.eventBus.emit("doubledEmail",{}),t.abrupt("break",19);case 16:return this.router.redirect("/login"),t.abrupt("break",19);case 18:this.eventBus.emit("serverError",{});case 19:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"deleteProfile",value:(i=Fo(No().mark((function t(){var e;return No().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.profileService.deleteProfile(H);case 2:e=t.sent,t.t0=e.status,t.next=204===t.t0?6:8;break;case 6:return this.router.redirect("/login"),t.abrupt("break",9);case 8:this.eventBus.emit("serverError");case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"logout",value:(o=Fo(No().mark((function t(){var e,n;return No().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new g,t.next=3,e.logout();case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0||401===t.t0?7:9;break;case 7:return this.router.redirect("/login"),t.abrupt("break",10);case 9:this.eventBus.emit("serverError",{});case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],r&&Ao(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(C);function Ho(t){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(t)}function Wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vo(r.key),r)}}function Vo(t){var e=function(t,e){if("object"!=Ho(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ho(e)?e:e+""}function Yo(t,e,n){return e=Jo(e),function(t,e){if(e&&("object"===Ho(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qo()?Reflect.construct(e,n||[],Jo(t).constructor):e.apply(t,n))}function qo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qo=function(){return!!t})()}function Jo(t){return Jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jo(t)}function Ko(t,e){return Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ko(t,e)}var Xo="form__input__correct",$o=["webp","jpg","jpeg","png","bmp","gif"],Qo="".concat(t,"/static");const Zo=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yo(this,e,[t])).router=n,r.eventBus.addEventListener("changesSaved",r.changeSuccess.bind(r)),r.eventBus.addEventListener("doubledEmail",r.doubledEmail.bind(r)),r.eventBus.addEventListener("serverError",r.handleServerError.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ko(t,e)}(e,t),n=e,(r=[{key:"renderSettingsMain",value:function(){var t=this,e=H.userId,n=H.avatar,r=H.firstName,o=H.lastName,i=H.email;new ce(document.body).renderForm({userId:e,avatar:n,firstName:r,lastName:o}),new ye(document.body).renderForm(e);var a=Handlebars.templates["settingsMain.hbs"];this.mainElement=document.getElementById("activity"),this.mainElement.innerHTML=a({lastName:o,firstName:r,avatar:n,email:i,staticUrl:Qo});var s=document.getElementById("email"),c=document.getElementById("password"),u=document.getElementById("repeat-password"),l=document.getElementById("first-name"),f=document.getElementById("last-name"),d=document.getElementById("avatar"),p=document.getElementById("incorrect-avatar"),h=document.getElementById("incorrect-email"),y=document.getElementById("incorrect-password"),v=document.getElementById("incorrect-repeat-password"),m=document.getElementById("incorrect-first-name"),b=document.getElementById("incorrect-last-name"),g=document.getElementById("cancel-setting");s.addEventListener("focusout",(function(){h.classList.add(Xo),et(s.value.trim())||h.classList.remove(Xo)})),c.addEventListener("focusout",(function(){y.classList.add(Xo),tt(c.value)||""===c.value||y.classList.remove(Xo),c.value!==u.value&&""!==c.value&&v.classList.remove(Xo)})),u.addEventListener("focusout",(function(){v.classList.add(Xo),c.value!==u.value&&v.classList.remove(Xo)})),l.addEventListener("focusout",(function(){m.classList.add(Xo),rt(l.value.trim())||m.classList.remove(Xo)})),f.addEventListener("focusout",(function(){b.classList.add(Xo),rt(f.value.trim())||b.classList.remove(Xo)})),g.addEventListener("click",(function(){u.value="",c.value="",l.value=r,f.value=o,s.value=i,h.classList.add(Xo),v.classList.add(Xo),y.classList.add(Xo),m.classList.add(Xo),b.classList.add(Xo),p.classList.add(Xo)})),d.addEventListener("change",(function(){p.classList.add(Xo);var t,e=d.files[0],r=URL.createObjectURL(e),o=(t=e.name.split("."))[t.length-1];$o.includes(o)?document.getElementById("prewatch").setAttribute("src",r):(p.classList.remove(Xo),n.files=null)})),document.getElementById("accept-setting").addEventListener("click",(function(){t.isValidForm()})),document.getElementById("delete-setting").addEventListener("click",(function(){t.eventBus.emit("clickedDeleteProfile",{})})),document.getElementById("logout-button").addEventListener("click",(function(){t.eventBus.emit("clickedLogoutButton",{})}))}},{key:"handleServerError",value:function(){document.getElementById("server-error-500").classList.remove("server-error-500")}},{key:"isValidForm",value:function(){var t=document.getElementById("email"),e=document.getElementById("password"),n=document.getElementById("repeat-password"),r=document.getElementById("first-name"),o=document.getElementById("last-name"),i=document.getElementById("avatar"),a=document.getElementById("incorrect-avatar"),s=document.getElementById("incorrect-email"),c=document.getElementById("incorrect-password"),u=document.getElementById("incorrect-repeat-password"),l=document.getElementById("incorrect-first-name"),f=document.getElementById("incorrect-last-name"),d=document.getElementById("repeat-email");s.classList.add(Xo),u.classList.add(Xo),c.classList.add(Xo),l.classList.add(Xo),f.classList.add(Xo),a.classList.add(Xo);var p=!0;et(t.value.trim())||(s.classList.remove(Xo),p=!1),e.value!=n.value&&(u.classList.remove(Xo),p=!1),tt(e.value)||""===e.value||(c.classList.remove(Xo),p=!1),rt(r.value.trim())||(l.classList.remove(Xo),p=!1),rt(o.value.trim())||(f.classList.remove(Xo),p=!1);var h,y=(h=i.files[0].name.split("."))[h.length-1];if($o.includes(y)||(a.classList.remove(Xo),p=!1),!p)return!1;d.classList.add("correct"),this.eventBus.emit("clickedSaveChanges",{firstName:r.value,lastName:o.value,password:e.value,repeatPassword:n.value,email:t.value,avatar:i.files[0]})}},{key:"changeSuccess",value:function(){document.getElementById("user__avatar-img").setAttribute("src","".concat(Qo,"/").concat(H.avatar)),this.router.redirect("/profile/".concat(H.userId))}},{key:"doubledEmail",value:function(){document.getElementById("repeat-email").classList.remove(Xo)}}])&&Wo(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(lt);function ti(t){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(t)}function ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ni(r.key),r)}}function ni(t){var e=function(t,e){if("object"!=ti(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ti(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ti(e)?e:e+""}var ri=["clickedSaveChanges","changesSaved","clickedLogoutButton","clickedDeleteProfile","doubledEmail","serverError"];const oi=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventBus=new Bt(ri),this.settingsModel=new Do(this.eventBus,e,n),this.settingsView=new Zo(this.eventBus,e)},(e=[{key:"renderSettingsView",value:function(){this.settingsView.renderSettingsMain()}}])&&ei(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();var ii=n(72),ai=n.n(ii),si=n(825),ci=n.n(si),ui=n(659),li=n.n(ui),fi=n(56),di=n.n(fi),pi=n(540),hi=n.n(pi),yi=n(113),vi=n.n(yi),mi=n(557),bi={};bi.styleTagTransform=vi(),bi.setAttributes=di(),bi.insert=li().bind(null,"head"),bi.domAPI=ci(),bi.insertStyleElement=hi(),ai()(mi.A,bi),mi.A&&mi.A.locals&&mi.A.locals;var gi=n(252),wi={};function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function Ei(){Ei=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new B(r||[]);return o(a,"_invoke",{value:_(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(I([])));E&&E!==n&&r.call(E,a)&&(w=E);var k=g.prototype=m.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,s){var c=f(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==xi(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=d;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(xi(e)+" is not iterable")}return b.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,u(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(S.prototype),u(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new S(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function ki(){ki=function(t,e){return new n(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function n(t,r,o){var i=RegExp(t,r);return e.set(i,o||e.get(t)),Li(i,n.prototype)}function r(t,n){var r=e.get(n);return Object.keys(r).reduce((function(e,n){var o=r[n];if("number"==typeof o)e[n]=t[o];else{for(var i=0;void 0===t[o[i]]&&i+1<o.length;)i++;e[n]=t[o[i]]}return e}),Object.create(null))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Li(t,e)}(n,RegExp),n.prototype.exec=function(e){var n=t.exec.call(this,e);if(n){n.groups=r(n,this);var o=n.indices;o&&(o.groups=r(o,this))}return n},n.prototype[Symbol.replace]=function(n,o){if("string"==typeof o){var i=e.get(this);return t[Symbol.replace].call(this,n,o.replace(/\$<([^>]+)>/g,(function(t,e){var n=i[e];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof o){var a=this;return t[Symbol.replace].call(this,n,(function(){var t=arguments;return"object"!=xi(t[t.length-1])&&(t=[].slice.call(t)).push(r(t,a)),o.apply(this,t)}))}return t[Symbol.replace].call(this,n,o)},ki.apply(this,arguments)}function Li(t,e){return Li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Li(t,e)}function Si(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function _i(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Si(i,r,o,a,s,"next",t)}function s(t){Si(i,r,o,a,s,"throw",t)}a(void 0)}))}}wi.styleTagTransform=vi(),wi.setAttributes=di(),wi.insert=li().bind(null,"head"),wi.domAPI=ci(),wi.insertStyleElement=hi(),ai()(gi.A,wi),gi.A&&gi.A.locals&&gi.A.locals,document.addEventListener("DOMContentLoaded",_i(Ei().mark((function t(){var e,n,r,o,i,a,s,u,l,f,d,p,h;return Ei().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new oo("wss://socio-project.ru/api/v1/chat/ws/"),n=new T,r=new Gt(n,e),o=new tn(n,e),i=new In(n,e),a=new rr(n,e),s=new Or(n,e),u=new to(n,e),l=new Io(n,e),f=new oi(n,e),d={paths:[{path:/\/login/,func:function(t){i.renderLoginView(t),e.closeWebSocket()},title:"Вход"},{path:/\/signup/,func:function(t){r.renderSignupView(t),e.closeWebSocket()},title:"Регистрация"},{path:/\/feed/,func:l.renderFeed.bind(l),title:"Новости"},{path:ki(/\/profile\/([0-9]+)/,{userId:1}),func:o.renderProfileView.bind(o),title:"Профиль"},{path:/\/settings/,func:f.renderSettingsView.bind(f),title:"Настройки"},{path:/\/messenger/,func:s.renderMessengerView.bind(s),title:"Мессенджер"},{path:ki(/\/community\/(.+)/,{section:1}),func:a.renderView.bind(a),title:"Друзья"},{path:ki(/\/chat\/([0-9]+)/,{companionId:1}),func:u.renderChatView.bind(u),title:"Диалог"},{path:/\//,func:l.renderFeed.bind(l),akaPath:"feed",title:"Новости"}]},n.setConfig(d),t.next=14,c.updateCSRFToken();case 14:p=t.sent,h=window.location.pathname,t.t0=h,t.next="/login"===t.t0||"/signup"===t.t0||"/"===t.t0?19:27;break;case 19:if(!p){t.next=25;break}return t.next=22,H.updateState();case 22:n.redirect("/feed"),t.next=26;break;case 25:n.redirect(h,!1);case 26:return t.abrupt("break",35);case 27:if(!p){t.next=34;break}return t.next=30,H.updateState();case 30:e.openWebSocket(),n.redirect(h),t.next=35;break;case 34:n.redirect("/login",!1);case 35:case"end":return t.stop()}}),t)}))))})()})();